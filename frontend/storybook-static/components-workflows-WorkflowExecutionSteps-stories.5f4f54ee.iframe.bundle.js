"use strict";(self.webpackChunkproxy_agent_platform_frontend=self.webpackChunkproxy_agent_platform_frontend||[]).push([[8583],{"./src/components/workflows/WorkflowExecutionSteps.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllComplete:()=>AllComplete,AlmostComplete:()=>AlmostComplete,BackendTDD:()=>BackendTDD,CompactView:()=>CompactView,FrontendComponent:()=>FrontendComponent,Interactive:()=>Interactive,JustStarted:()=>JustStarted,__namedExportsOrder:()=>__namedExportsOrder,default:()=>WorkflowExecutionSteps_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),design_system=__webpack_require__("./src/lib/design-system.ts"),AsyncJobTimeline=__webpack_require__("./src/components/shared/AsyncJobTimeline.tsx");const tddPhaseColors={red:{bg:"rgba(220, 50, 47, 0.1)",text:"#dc322f",label:"RED: Write Test"},green:{bg:"rgba(133, 153, 0, 0.1)",text:"#859900",label:"GREEN: Implement"},refactor:{bg:"rgba(38, 139, 210, 0.1)",text:"#268bd2",label:"REFACTOR: Improve"}};function WorkflowExecutionSteps({steps,currentStepIndex=0,onStepComplete,onStepStart,showDetails=!0}){const timelineSteps=steps.map((step,index)=>({id:step.stepId,label:step.title,status:"completed"===step.status?"done":"in_progress"===step.status?"active":"failed"===step.status?"error":"pending",emoji:step.icon,duration:step.estimatedMinutes>0?`${step.estimatedMinutes}m`:void 0})),currentStep=steps[currentStepIndex];return(0,jsx_runtime.jsxs)("div",{className:"workflow-execution-steps",children:[(0,jsx_runtime.jsx)("div",{style:{marginBottom:design_system.YK[6]},children:(0,jsx_runtime.jsx)(AsyncJobTimeline.A,{steps:timelineSteps,variant:"default",size:"full",showProgress:!0})}),showDetails&&currentStep&&(0,jsx_runtime.jsxs)("div",{style:{padding:design_system.YK[6],backgroundColor:design_system.ZI.bg.secondary,borderRadius:design_system.Vq.lg,boxShadow:design_system.Eo.sm},children:[(0,jsx_runtime.jsxs)("div",{style:{marginBottom:design_system.YK[4]},children:[(0,jsx_runtime.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:design_system.YK[2],marginBottom:design_system.YK[2]},children:[(0,jsx_runtime.jsx)("span",{style:{fontSize:design_system.J["2xl"]},children:currentStep.icon}),(0,jsx_runtime.jsx)("h3",{style:{fontSize:design_system.J.lg,fontWeight:design_system.Wy.semibold,color:design_system.ZI.text.primary,margin:0},children:currentStep.title})]}),currentStep.tddPhase&&(0,jsx_runtime.jsx)("div",{style:{display:"inline-block",padding:`${design_system.YK[1]} ${design_system.YK[3]}`,backgroundColor:tddPhaseColors[currentStep.tddPhase].bg,color:tddPhaseColors[currentStep.tddPhase].text,borderRadius:design_system.Vq.base,fontSize:design_system.J.xs,fontWeight:design_system.Wy.medium,marginBottom:design_system.YK[3]},children:tddPhaseColors[currentStep.tddPhase].label})]}),(0,jsx_runtime.jsx)("p",{style:{fontSize:design_system.J.base,color:design_system.ZI.text.secondary,lineHeight:1.6,marginBottom:design_system.YK[4]},children:currentStep.description}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:design_system.YK[2],marginBottom:design_system.YK[4],fontSize:design_system.J.sm,color:design_system.ZI.text.tertiary},children:[(0,jsx_runtime.jsx)("span",{children:"â±ï¸"}),(0,jsx_runtime.jsxs)("span",{children:["Estimated: ",currentStep.estimatedMinutes," minutes"]})]}),currentStep.validationCommand&&(0,jsx_runtime.jsxs)("div",{style:{marginBottom:design_system.YK[4]},children:[(0,jsx_runtime.jsx)("div",{style:{fontSize:design_system.J.sm,fontWeight:design_system.Wy.medium,color:design_system.ZI.text.secondary,marginBottom:design_system.YK[2]},children:"ðŸ’» Validation Command:"}),(0,jsx_runtime.jsx)("pre",{style:{padding:design_system.YK[3],backgroundColor:design_system.ZI.bg.tertiary,borderRadius:design_system.Vq.base,fontSize:design_system.J.sm,fontFamily:"monospace",color:design_system.ZI.text.primary,overflowX:"auto",margin:0},children:currentStep.validationCommand})]}),currentStep.expectedOutcome&&(0,jsx_runtime.jsxs)("div",{style:{padding:design_system.YK[3],backgroundColor:"rgba(133, 153, 0, 0.05)",border:"1px solid rgba(133, 153, 0, 0.2)",borderRadius:design_system.Vq.base,marginBottom:design_system.YK[4]},children:[(0,jsx_runtime.jsx)("div",{style:{fontSize:design_system.J.sm,fontWeight:design_system.Wy.medium,color:"#859900",marginBottom:design_system.YK[1]},children:"âœ“ Expected Outcome:"}),(0,jsx_runtime.jsx)("div",{style:{fontSize:design_system.J.sm,color:design_system.ZI.text.secondary},children:currentStep.expectedOutcome})]}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",gap:design_system.YK[3]},children:["pending"===currentStep.status&&onStepStart&&(0,jsx_runtime.jsx)("button",{onClick:()=>onStepStart(currentStep.stepId),style:{flex:1,padding:`${design_system.YK[3]} ${design_system.YK[4]}`,backgroundColor:design_system.ZI.accent.primary,color:design_system.ZI.text.inverse,border:"none",borderRadius:design_system.Vq.base,fontSize:design_system.J.base,fontWeight:design_system.Wy.medium,cursor:"pointer",transition:"all 0.2s ease"},children:"Start Step"}),"in_progress"===currentStep.status&&onStepComplete&&(0,jsx_runtime.jsx)("button",{onClick:()=>onStepComplete(currentStep.stepId),style:{flex:1,padding:`${design_system.YK[3]} ${design_system.YK[4]}`,backgroundColor:"#859900",color:"#fdf6e3",border:"none",borderRadius:design_system.Vq.base,fontSize:design_system.J.base,fontWeight:design_system.Wy.medium,cursor:"pointer",transition:"all 0.2s ease"},children:"âœ“ Mark Complete"})]})]}),(0,jsx_runtime.jsxs)("div",{style:{marginTop:design_system.YK[4],padding:design_system.YK[4],backgroundColor:design_system.ZI.bg.tertiary,borderRadius:design_system.Vq.base,display:"flex",justifyContent:"space-around"},children:[(0,jsx_runtime.jsxs)("div",{style:{textAlign:"center"},children:[(0,jsx_runtime.jsxs)("div",{style:{fontSize:design_system.J["2xl"],fontWeight:design_system.Wy.bold,color:design_system.ZI.text.primary},children:[steps.filter(s=>"completed"===s.status).length,"/",steps.length]}),(0,jsx_runtime.jsx)("div",{style:{fontSize:design_system.J.sm,color:design_system.ZI.text.secondary},children:"Steps Complete"})]}),(0,jsx_runtime.jsxs)("div",{style:{textAlign:"center"},children:[(0,jsx_runtime.jsxs)("div",{style:{fontSize:design_system.J["2xl"],fontWeight:design_system.Wy.bold,color:design_system.ZI.text.primary},children:[steps.reduce((sum,s)=>sum+s.estimatedMinutes,0),"m"]}),(0,jsx_runtime.jsx)("div",{style:{fontSize:design_system.J.sm,color:design_system.ZI.text.secondary},children:"Total Time"})]}),(0,jsx_runtime.jsxs)("div",{style:{textAlign:"center"},children:[(0,jsx_runtime.jsxs)("div",{style:{fontSize:design_system.J["2xl"],fontWeight:design_system.Wy.bold,color:"#859900"},children:[Math.round(steps.filter(s=>"completed"===s.status).length/steps.length*100),"%"]}),(0,jsx_runtime.jsx)("div",{style:{fontSize:design_system.J.sm,color:design_system.ZI.text.secondary},children:"Progress"})]})]})]})}try{WorkflowExecutionSteps.displayName="WorkflowExecutionSteps",WorkflowExecutionSteps.__docgenInfo={description:"",displayName:"WorkflowExecutionSteps",props:{steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"WorkflowStep[]"}},currentStepIndex:{defaultValue:{value:"0"},description:"",name:"currentStepIndex",required:!1,type:{name:"number | undefined"}},onStepComplete:{defaultValue:null,description:"",name:"onStepComplete",required:!1,type:{name:"((stepId: string) => void) | undefined"}},onStepStart:{defaultValue:null,description:"",name:"onStepStart",required:!1,type:{name:"((stepId: string) => void) | undefined"}},showDetails:{defaultValue:{value:"true"},description:"",name:"showDetails",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.tsx#WorkflowExecutionSteps"]={docgenInfo:WorkflowExecutionSteps.__docgenInfo,name:"WorkflowExecutionSteps",path:"src/components/workflows/WorkflowExecutionSteps.tsx#WorkflowExecutionSteps"})}catch(__react_docgen_typescript_loader_error){}const WorkflowExecutionSteps_stories={title:"Workflows/WorkflowExecutionSteps",component:WorkflowExecutionSteps,parameters:{layout:"padded",docs:{description:{component:"Display AI-generated implementation steps with TDD phases, validation commands, and progress tracking."}}},tags:["autodocs"]},mockBackendSteps=[{stepId:"1",title:"Write failing test for /delegate endpoint",description:"Create test_delegation.py with test cases for POST /api/v1/delegate endpoint. Test should cover happy path, validation errors, and edge cases.",estimatedMinutes:20,status:"completed",tddPhase:"red",validationCommand:"uv run pytest src/services/delegation/tests/test_delegation.py -v",expectedOutcome:'Test fails with "endpoint not found" or "not implemented" error',icon:"ðŸ”´",order:0},{stepId:"2",title:"Implement minimal /delegate endpoint",description:"Create delegation route handler in src/services/delegation/routes.py. Implement basic request validation and response structure. Keep implementation minimal to pass tests.",estimatedMinutes:25,status:"in_progress",tddPhase:"green",validationCommand:"uv run pytest src/services/delegation/tests/test_delegation.py -v",expectedOutcome:"All tests pass with basic implementation",icon:"ðŸŸ¢",order:1},{stepId:"3",title:"Refactor delegation logic",description:"Extract delegation logic into separate service layer. Add proper error handling, logging, and type hints. Ensure all tests still pass.",estimatedMinutes:30,status:"pending",tddPhase:"refactor",validationCommand:"uv run pytest src/services/delegation/tests/ && uv run ruff check src/services/delegation/",expectedOutcome:"Tests pass, code quality improved, no ruff errors",icon:"ðŸ”µ",order:2},{stepId:"4",title:"Add integration tests",description:"Write integration tests that cover the full delegation workflow from API request to database persistence.",estimatedMinutes:20,status:"pending",tddPhase:"red",validationCommand:"uv run pytest src/services/delegation/tests/test_integration.py -v",expectedOutcome:"Integration tests fail initially",icon:"ðŸ§ª",order:3},{stepId:"5",title:"Implement database persistence",description:"Add repository methods for saving and retrieving delegation records. Update route handler to persist data.",estimatedMinutes:25,status:"pending",tddPhase:"green",validationCommand:"uv run pytest src/services/delegation/tests/ --cov=src/services/delegation",expectedOutcome:"All tests pass, 95%+ coverage achieved",icon:"ðŸ’¾",order:4},{stepId:"6",title:"Final validation and documentation",description:"Run full test suite, check type hints, update API documentation. Ensure all acceptance criteria met.",estimatedMinutes:15,status:"pending",validationCommand:"uv run pytest && uv run mypy src/services/delegation/ && uv run ruff check",expectedOutcome:"All tests pass, no type errors, documentation complete",icon:"âœ…",order:5}],BackendTDD={args:{steps:mockBackendSteps,currentStepIndex:1,showDetails:!0}},FrontendComponent={args:{steps:[{stepId:"1",title:"Create component file with TypeScript types",description:"Create WorkflowCard.tsx with props interface using design system types. Import design tokens.",estimatedMinutes:15,status:"completed",validationCommand:"cd frontend && npm run type-check",expectedOutcome:"Component file created, no TypeScript errors",icon:"ðŸ“",order:0},{stepId:"2",title:"Create Storybook story with variants",description:"Create WorkflowCard.stories.tsx with stories for all workflow types and states (selected, unselected).",estimatedMinutes:20,status:"in_progress",validationCommand:"cd frontend && npm run storybook",expectedOutcome:"Stories render correctly in Storybook",icon:"ðŸ“š",order:1},{stepId:"3",title:"Implement component with design tokens",description:"Build component using spacing, fontSize, semanticColors from design-system.ts. Never hardcode values!",estimatedMinutes:30,status:"pending",validationCommand:"cd frontend && npm run lint",expectedOutcome:"Component renders correctly, uses all design tokens",icon:"ðŸŽ¨",order:2},{stepId:"4",title:"Add accessibility and interactions",description:"Add ARIA labels, keyboard navigation, focus management. Test with Storybook a11y addon.",estimatedMinutes:20,status:"pending",validationCommand:"cd frontend && npm run storybook",expectedOutcome:"No a11y violations in Storybook addon",icon:"â™¿",order:3},{stepId:"5",title:"Integrate into app",description:"Import component into workflow browser. Wire up state management and API calls.",estimatedMinutes:25,status:"pending",validationCommand:"cd frontend && npm run build",expectedOutcome:"Component works in production build",icon:"ðŸ”Œ",order:4}],currentStepIndex:1,showDetails:!0}},JustStarted={args:{steps:mockBackendSteps.map((step,i)=>({...step,status:0===i?"in_progress":"pending"})),currentStepIndex:0,showDetails:!0}},AlmostComplete={args:{steps:mockBackendSteps.map((step,i)=>({...step,status:i<5?"completed":"in_progress"})),currentStepIndex:5,showDetails:!0}},AllComplete={args:{steps:mockBackendSteps.map(step=>({...step,status:"completed"})),currentStepIndex:5,showDetails:!0}},CompactView={args:{steps:mockBackendSteps,currentStepIndex:2,showDetails:!1}},Interactive={render:()=>{const[steps,setSteps]=react.useState(mockBackendSteps),[currentIndex,setCurrentIndex]=react.useState(1);return(0,jsx_runtime.jsx)("div",{style:{maxWidth:"800px"},children:(0,jsx_runtime.jsx)(WorkflowExecutionSteps,{steps,currentStepIndex:currentIndex,onStepComplete:stepId=>{setSteps(prev=>prev.map(step=>step.stepId===stepId?{...step,status:"completed"}:step));const nextIndex=steps.findIndex(s=>"pending"===s.status);-1!==nextIndex&&(setCurrentIndex(nextIndex),setSteps(prev=>prev.map((step,i)=>i===nextIndex?{...step,status:"in_progress"}:step)))},onStepStart:stepId=>{setSteps(prev=>prev.map(step=>step.stepId===stepId?{...step,status:"in_progress"}:step))},showDetails:!0})})}},__namedExportsOrder=["BackendTDD","FrontendComponent","JustStarted","AlmostComplete","AllComplete","CompactView","Interactive"];try{BackendTDD.displayName="BackendTDD",BackendTDD.__docgenInfo={description:"Backend TDD Workflow - Shows RED-GREEN-REFACTOR phases",displayName:"BackendTDD",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#BackendTDD"]={docgenInfo:BackendTDD.__docgenInfo,name:"BackendTDD",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#BackendTDD"})}catch(__react_docgen_typescript_loader_error){}try{FrontendComponent.displayName="FrontendComponent",FrontendComponent.__docgenInfo={description:"Frontend Workflow - Component development steps",displayName:"FrontendComponent",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#FrontendComponent"]={docgenInfo:FrontendComponent.__docgenInfo,name:"FrontendComponent",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#FrontendComponent"})}catch(__react_docgen_typescript_loader_error){}try{JustStarted.displayName="JustStarted",JustStarted.__docgenInfo={description:"Just Started - First step in progress",displayName:"JustStarted",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#JustStarted"]={docgenInfo:JustStarted.__docgenInfo,name:"JustStarted",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#JustStarted"})}catch(__react_docgen_typescript_loader_error){}try{AlmostComplete.displayName="AlmostComplete",AlmostComplete.__docgenInfo={description:"Almost Complete - Last step remaining",displayName:"AlmostComplete",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#AlmostComplete"]={docgenInfo:AlmostComplete.__docgenInfo,name:"AlmostComplete",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#AlmostComplete"})}catch(__react_docgen_typescript_loader_error){}try{AllComplete.displayName="AllComplete",AllComplete.__docgenInfo={description:"All Complete - Celebration state",displayName:"AllComplete",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#AllComplete"]={docgenInfo:AllComplete.__docgenInfo,name:"AllComplete",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#AllComplete"})}catch(__react_docgen_typescript_loader_error){}try{CompactView.displayName="CompactView",CompactView.__docgenInfo={description:"Without Details - Compact view",displayName:"CompactView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#CompactView"]={docgenInfo:CompactView.__docgenInfo,name:"CompactView",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#CompactView"})}catch(__react_docgen_typescript_loader_error){}try{Interactive.displayName="Interactive",Interactive.__docgenInfo={description:"Interactive - Click to complete steps",displayName:"Interactive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/workflows/WorkflowExecutionSteps.stories.tsx#Interactive"]={docgenInfo:Interactive.__docgenInfo,name:"Interactive",path:"src/components/workflows/WorkflowExecutionSteps.stories.tsx#Interactive"})}catch(__react_docgen_typescript_loader_error){}}}]);