"use strict";(self.webpackChunkproxy_agent_platform_frontend=self.webpackChunkproxy_agent_platform_frontend||[]).push([[598],{"./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>createLucideIcon});var react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)(({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,children,...rest},ref)=>{return(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:`lucide lucide-${string=iconName,string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...rest},[...iconNode.map(([tag,attrs])=>(0,react.createElement)(tag,attrs)),...(Array.isArray(children)?children:[children])||[]]);var string});return Component.displayName=`${iconName}`,Component}},"./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/loader-2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Loader2});const Loader2=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},"./src/components/tasks/QuickCapture.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Loading:()=>Loading,VoiceInput:()=>VoiceInput,WithCustomClass:()=>WithCustomClass,WithError:()=>WithError,__namedExportsOrder:()=>__namedExportsOrder,default:()=>QuickCapture_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),createLucideIcon=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js");const MicOff=(0,createLucideIcon.A)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Mic=(0,createLucideIcon.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var loader_2=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/loader-2.js");const Send=(0,createLucideIcon.A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var taskApi=__webpack_require__("./src/services/taskApi.ts"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function QuickCapture({userId,onTaskCreated,className=""}){const[text,setText]=(0,react.useState)(""),[isLoading,setIsLoading]=(0,react.useState)(!1),[isListening,setIsListening]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),[successMessage,setSuccessMessage]=(0,react.useState)(null),[location,setLocation]=(0,react.useState)(),recognitionRef=(0,react.useRef)(null),inputRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(position=>{setLocation({lat:position.coords.latitude,lng:position.coords.longitude})},error=>{console.warn("Geolocation not available:",error)})},[]),(0,react.useEffect)(()=>{const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;if(SpeechRecognition){const recognition=new SpeechRecognition;recognition.continuous=!1,recognition.interimResults=!1,recognition.lang="en-US",recognition.addEventListener("result",event=>{const transcript=event.results[0][0].transcript;setText(transcript),setIsListening(!1)}),recognition.addEventListener("end",()=>{setIsListening(!1)}),recognition.addEventListener("error",()=>{setIsListening(!1),setError("Voice recognition failed. Please try typing instead.")}),recognitionRef.current=recognition}return()=>{recognitionRef.current&&recognitionRef.current.abort()}},[]);const clearMessages=()=>{setError(null),setSuccessMessage(null)},handleSubmit=async(e,isVoiceInput=!1)=>{if(e.preventDefault(),text.trim()&&!isLoading){clearMessages(),setIsLoading(!0);try{const startTime=Date.now(),request={text:text.trim(),user_id:userId,voice_input:isVoiceInput};location&&(request.location=location);const response=await taskApi.taskApi.quickCapture(request),serverTime=(Date.now(),response.processing_time_ms);setSuccessMessage(serverTime<2e3?`Captured in ${(serverTime/1e3).toFixed(1)}s âš¡`:`Took ${(serverTime/1e3).toFixed(1)}s`),onTaskCreated(response.task),setText(""),setTimeout(()=>setSuccessMessage(null),3e3)}catch(err){err instanceof taskApi.TaskApiError?setError(`Failed to capture task: ${err.message}`):setError("Failed to capture task. Please try again.")}finally{setIsLoading(!1)}}};return(0,react.useEffect)(()=>{text&&!1===isListening&&recognitionRef.current&&setTimeout(()=>{var _inputRef_current;(null===(_inputRef_current=inputRef.current)||void 0===_inputRef_current?void 0:_inputRef_current.form)&&handleSubmit(new Event("submit"),!0)},100)},[text,isListening]),(0,jsx_runtime.jsx)("div",{className:`glass-card rounded-xl p-6 ${className}`,children:(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Capture"}),recognitionRef.current&&(0,jsx_runtime.jsx)("button",{type:"button",onClick:()=>{recognitionRef.current?isListening?(recognitionRef.current.stop(),setIsListening(!1)):(clearMessages(),setIsListening(!0),recognitionRef.current.start()):setError("Voice recognition not supported in this browser")},disabled:isLoading,className:`p-2 rounded-lg transition-colors ${isListening?"bg-red-100 text-red-600 hover:bg-red-200":"bg-blue-100 text-blue-600 hover:bg-blue-200"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":isListening?"Stop voice input":"Start voice input",children:isListening?(0,jsx_runtime.jsx)(MicOff,{className:"w-4 h-4"}):(0,jsx_runtime.jsx)(Mic,{className:"w-4 h-4"})})]}),(0,jsx_runtime.jsxs)("form",{onSubmit:e=>{handleSubmit(e,!1)},className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("input",{ref:inputRef,type:"text",value:text,onChange:e=>setText(e.target.value),placeholder:"Quick capture a task...",disabled:isLoading||isListening,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),isListening&&(0,jsx_runtime.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,jsx_runtime.jsx)("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse"}),(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Listening..."})]})})]}),(0,jsx_runtime.jsx)("button",{type:"submit",disabled:!text.trim()||isLoading||isListening,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:isLoading?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(loader_2.A,{className:"w-4 h-4 animate-spin"}),(0,jsx_runtime.jsx)("span",{children:"Capturing..."})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Send,{className:"w-4 h-4"}),(0,jsx_runtime.jsx)("span",{children:"Capture"})]})})]}),error&&(0,jsx_runtime.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,jsx_runtime.jsx)("p",{className:"text-red-600 text-sm",children:error})}),successMessage&&(0,jsx_runtime.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,jsx_runtime.jsx)("p",{className:"text-green-600 text-sm font-medium",children:successMessage})})]})})}try{QuickCapture.displayName="QuickCapture",QuickCapture.__docgenInfo={description:"",displayName:"QuickCapture",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}},onTaskCreated:{defaultValue:null,description:"",name:"onTaskCreated",required:!0,type:{name:"(task: Task) => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tasks/QuickCapture.tsx#QuickCapture"]={docgenInfo:QuickCapture.__docgenInfo,name:"QuickCapture",path:"src/components/tasks/QuickCapture.tsx#QuickCapture"})}catch(__react_docgen_typescript_loader_error){}var QuickCapture_stories_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");jest.mock("@/services/taskApi",()=>({taskApi:{quickCapture:jest.fn().mockResolvedValue({task:{id:"1",title:"Test task",description:"Test description",status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),user_id:"user-1",priority:"medium",tags:[],due_date:null,completed_at:null},processing_time_ms:1500})},TaskApiError:class extends Error{constructor(message){super(message),this.name="TaskApiError"}}}));const QuickCapture_stories={title:"Components/QuickCapture",component:QuickCapture,parameters:{layout:"centered",docs:{description:{component:"A component for quickly capturing tasks with voice and text input."}}},argTypes:{userId:{control:"text",description:"The user ID for the task"},onTaskCreated:{action:"taskCreated",description:"Callback when a task is created"},className:{control:"text",description:"Additional CSS classes"}},args:{userId:"user-123",onTaskCreated:task=>QuickCapture_stories_console.log("Task created:",task)}},Default={args:{userId:"user-123"}},WithCustomClass={args:{userId:"user-123",className:"max-w-md"}},Loading={args:{userId:"user-123"},parameters:{docs:{description:{story:"The component in a loading state (simulated by setting isLoading to true)."}}},play:async({canvasElement})=>{const input=canvasElement.querySelector("input"),submitButton=canvasElement.querySelector('button[type="submit"]');input&&submitButton&&(input.value="Test task",input.dispatchEvent(new Event("input",{bubbles:!0})),submitButton.click())}},WithError={args:{userId:"user-123"},parameters:{docs:{description:{story:"The component showing an error state."}}},play:async({canvasElement})=>{const{taskApi}=__webpack_require__("./src/services/taskApi.ts");taskApi.quickCapture.mockRejectedValueOnce(new Error("API Error"));const input=canvasElement.querySelector("input"),submitButton=canvasElement.querySelector('button[type="submit"]');input&&submitButton&&(input.value="Test task",input.dispatchEvent(new Event("input",{bubbles:!0})),submitButton.click())}},VoiceInput={args:{userId:"user-123"},parameters:{docs:{description:{story:"The component with voice input capabilities (requires browser support)."}}},play:async({canvasElement})=>{Object.defineProperty(window,"SpeechRecognition",{writable:!0,value:class MockSpeechRecognition{start(){setTimeout(()=>{const event=new Event("result");event.results=[[{transcript:"Voice captured task"}]],this.dispatchEvent(event)},100)}stop(){}abort(){}addEventListener(){}dispatchEvent(){}constructor(){this.continuous=!1,this.interimResults=!1,this.lang="en-US"}}})}},__namedExportsOrder=["Default","WithCustomClass","Loading","WithError","VoiceInput"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    userId: 'user-123'\n  }\n}",...Default.parameters?.docs?.source}}},WithCustomClass.parameters={...WithCustomClass.parameters,docs:{...WithCustomClass.parameters?.docs,source:{originalSource:"{\n  args: {\n    userId: 'user-123',\n    className: 'max-w-md'\n  }\n}",...WithCustomClass.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  args: {\n    userId: 'user-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component in a loading state (simulated by setting isLoading to true).'\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    // Simulate loading state by clicking submit\n    const input = canvasElement.querySelector('input');\n    const submitButton = canvasElement.querySelector('button[type=\"submit\"]');\n    if (input && submitButton) {\n      input.value = 'Test task';\n      input.dispatchEvent(new Event('input', {\n        bubbles: true\n      }));\n      submitButton.click();\n    }\n  }\n}",...Loading.parameters?.docs?.source}}},WithError.parameters={...WithError.parameters,docs:{...WithError.parameters?.docs,source:{originalSource:"{\n  args: {\n    userId: 'user-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component showing an error state.'\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    // Mock an error by modifying the API response\n    const {\n      taskApi\n    } = require('@/services/taskApi');\n    taskApi.quickCapture.mockRejectedValueOnce(new Error('API Error'));\n    const input = canvasElement.querySelector('input');\n    const submitButton = canvasElement.querySelector('button[type=\"submit\"]');\n    if (input && submitButton) {\n      input.value = 'Test task';\n      input.dispatchEvent(new Event('input', {\n        bubbles: true\n      }));\n      submitButton.click();\n    }\n  }\n}",...WithError.parameters?.docs?.source}}},VoiceInput.parameters={...VoiceInput.parameters,docs:{...VoiceInput.parameters?.docs,source:{originalSource:"{\n  args: {\n    userId: 'user-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component with voice input capabilities (requires browser support).'\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    // Mock speech recognition\n    Object.defineProperty(window, 'SpeechRecognition', {\n      writable: true,\n      value: class MockSpeechRecognition {\n        continuous = false;\n        interimResults = false;\n        lang = 'en-US';\n        start() {\n          setTimeout(() => {\n            const event = new Event('result');\n            (event as any).results = [[{\n              transcript: 'Voice captured task'\n            }]];\n            this.dispatchEvent(event);\n          }, 100);\n        }\n        stop() {}\n        abort() {}\n        addEventListener() {}\n        dispatchEvent() {}\n      }\n    });\n  }\n}",...VoiceInput.parameters?.docs?.source}}}},"./src/services/taskApi.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TaskApiError:()=>TaskApiError,taskApi:()=>taskApi});class TaskApiError extends Error{constructor(message,status){super(message),this.status=status,this.name="TaskApiError"}}async function apiRequest(endpoint,options={}){const url=`http://192.168.1.26:8000${endpoint}`,response=await fetch(url,{headers:{"Content-Type":"application/json",...options.headers},...options});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new TaskApiError(errorData.detail||`HTTP ${response.status}: ${response.statusText}`,response.status)}return response.json()}const taskApi={createTask:async taskData=>apiRequest("/api/v1/tasks",{method:"POST",body:JSON.stringify(taskData)}),getTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}`),updateTask:async(taskId,updates)=>apiRequest(`/api/v1/tasks/${taskId}`,{method:"PUT",body:JSON.stringify(updates)}),async deleteTask(taskId){await apiRequest(`/api/v1/tasks/${taskId}`,{method:"DELETE"})},async listTasks(params={}){const searchParams=new URLSearchParams;return Object.entries(params).forEach(([key,value])=>{void 0!==value&&(Array.isArray(value)?value.forEach(item=>searchParams.append(key,item)):searchParams.append(key,String(value)))}),apiRequest(`/api/v1/tasks?${searchParams.toString()}`)},createProject:async projectData=>apiRequest("/api/v1/projects",{method:"POST",body:JSON.stringify(projectData)}),getProject:async projectId=>apiRequest(`/api/v1/projects/${projectId}`),listProjects:async()=>apiRequest("/api/v1/projects"),getTaskHierarchy:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/hierarchy`),bulkUpdateTasks:async(taskIds,updates)=>apiRequest("/api/v1/tasks/bulk",{method:"PATCH",body:JSON.stringify({task_ids:taskIds,updates})}),estimateTaskDuration:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/estimate`,{method:"POST"}),breakDownTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/breakdown`,{method:"POST"}),createTaskFromTemplate:async(templateName,projectId,variables)=>apiRequest("/api/v1/tasks/from-template",{method:"POST",body:JSON.stringify({template_name:templateName,project_id:projectId,variables})}),quickCapture:async request=>apiRequest("/api/v1/mobile/quick-capture",{method:"POST",body:JSON.stringify(request)}),getMobileDashboard:async userId=>apiRequest(`/api/v1/mobile/dashboard/${userId}`),getMobileOptimizedTasks:async(userId,limit=20)=>apiRequest(`/api/v1/mobile/tasks/${userId}?limit=${limit}`),processVoiceInput:async(audioText,userId)=>apiRequest("/api/v1/mobile/voice-process",{method:"POST",body:JSON.stringify({audio_text:audioText,user_id:userId})}),getProjectAnalytics:async projectId=>apiRequest(`/api/v1/projects/${projectId}/analytics`),smartPrioritizeTasks:async projectId=>apiRequest(`/api/v1/projects/${projectId}/prioritize`,{method:"POST"})}}}]);