"use strict";(self.webpackChunkproxy_agent_platform_frontend=self.webpackChunkproxy_agent_platform_frontend||[]).push([[8586],{"./src/components/mobile/modes/MenderMode.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,HighEnergy:()=>HighEnergy,LowEnergy:()=>LowEnergy,MysteryReward:()=>MysteryReward,__namedExportsOrder:()=>__namedExportsOrder,default:()=>MenderMode_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),EnergyGauge=__webpack_require__("./src/components/mobile/core/EnergyGauge.tsx"),CategoryRow=__webpack_require__("./src/components/mobile/task/CategoryRow.tsx"),ExpandableTile=__webpack_require__("./src/components/mobile/core/ExpandableTile.tsx"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const API_URL="http://localhost:8000",modes_MenderMode=({energy,onTaskTap,refreshTrigger})=>{const[tasks,setTasks]=(0,react.useState)([]),[isLoading,setIsLoading]=(0,react.useState)(!1),[menderSessions,setMenderSessions]=(0,react.useState)(0),[showMysteryBox,setShowMysteryBox]=(0,react.useState)(!1),[energyTrend,setEnergyTrend]=(0,react.useState)("stable"),[predictedEnergy,setPredictedEnergy]=(0,react.useState)();(0,react.useEffect)(()=>{fetchTasks(),fetchEnergyData()},[refreshTrigger]),(0,react.useEffect)(()=>{menderSessions>=3&&setShowMysteryBox(!0)},[menderSessions]);const fetchTasks=async()=>{setIsLoading(!0);try{const response=await fetch(`${API_URL}/api/v1/tasks?limit=100&user_id=mobile-user`);if(!response.ok){const fallbackResponse=await fetch(`${API_URL}/api/v1/simple-tasks`);if(!fallbackResponse.ok)throw new Error("Both tasks endpoints failed");const fallbackData=await fallbackResponse.json();return void setTasks(fallbackData.tasks||[])}const data=await response.json();setTasks(data.tasks||data||[])}catch(err){console.warn("API not available:",err),setTasks([])}finally{setIsLoading(!1)}},fetchEnergyData=async()=>{try{if((await fetch(`${API_URL}/api/v1/energy/current-level?user_id=mobile-user`)).ok)try{const trackResponse=await fetch(`${API_URL}/api/v1/energy/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`Current energy level: ${energy}%`})});if(trackResponse.ok){const trackData=await trackResponse.json();setEnergyTrend(trackData.trend||"stable"),setPredictedEnergy(trackData.predicted_next_hour)}}catch(err){console.warn("AI energy prediction not available")}}catch(err){console.warn("Energy API not available:",err),setEnergyTrend("stable")}},getFiveMinWins=()=>tasks.filter(t=>"completed"!==t.status&&(t.estimated_hours||0)<=.08).slice(0,8),getMindfulBreaks=()=>tasks.filter(t=>{var _t_tags;return"completed"!==t.status&&(null===(_t_tags=t.tags)||void 0===_t_tags?void 0:_t_tags.some(tag=>["meditation","break","relaxation","breathing","mindful"].includes(tag.toLowerCase())))}),getReviewReflect=()=>tasks.filter(t=>{var _t_tags;return"completed"!==t.status&&((null===(_t_tags=t.tags)||void 0===_t_tags?void 0:_t_tags.some(tag=>["review","planning","reflection","weekly"].includes(tag.toLowerCase())))||t.title.toLowerCase().includes("review")||t.title.toLowerCase().includes("reflect"))}),getAdministrative=()=>tasks.filter(t=>"completed"!==t.status&&"low"===t.priority&&(t.estimated_hours||0)<=.25).slice(0,8);return isLoading&&0===tasks.length?(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ’™"}),(0,jsx_runtime.jsx)("p",{className:"text-[#586e75]",children:"Preparing recovery..."})]})}):(0,jsx_runtime.jsxs)("div",{className:"h-full overflow-y-auto snap-y snap-mandatory",children:[(0,jsx_runtime.jsxs)("div",{className:"min-h-screen snap-start flex flex-col px-4 py-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-2xl",children:"ðŸ’™"}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("h2",{className:"text-lg font-bold text-[#93a1a1]",children:"Mender Mode"}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-[#586e75]",children:"Recover energy & rebuild"})]}),menderSessions>0&&(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-1",children:[...Array(3)].map((_,i)=>(0,jsx_runtime.jsx)("div",{className:"w-1.5 h-1.5 rounded-full "+(i<menderSessions?"bg-[#268bd2]":"bg-[#586e75]")},i))})]}),(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(ExpandableTile.A,{microContent:(0,jsx_runtime.jsx)(EnergyGauge.A,{energy,trend:energyTrend,predictedNextHour:predictedEnergy,variant:"micro"}),expandedContent:(0,jsx_runtime.jsx)("div",{className:"py-3",children:(0,jsx_runtime.jsx)(EnergyGauge.A,{energy,trend:energyTrend,predictedNextHour:predictedEnergy,variant:"expanded"})}),defaultExpanded:!1})}),getFiveMinWins().length>0&&(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(CategoryRow.A,{title:"5-Min Wins",icon:"ðŸŒ±",tasks:getFiveMinWins(),onTaskTap})}),getMindfulBreaks().length>0&&(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(CategoryRow.A,{title:"Mindful Breaks",icon:"ðŸ§˜",tasks:getMindfulBreaks(),onTaskTap})}),(0,jsx_runtime.jsx)("div",{className:"flex-1 flex items-end justify-center pb-2 mt-2",children:(0,jsx_runtime.jsx)("div",{className:"text-[#586e75] text-xs animate-bounce",children:"â†“ Swipe for more recovery tasks"})})]}),(0,jsx_runtime.jsxs)("div",{className:"min-h-screen snap-start flex flex-col px-4 py-3",children:[getReviewReflect().length>0&&(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(CategoryRow.A,{title:"Review & Reflect",icon:"ðŸ“",tasks:getReviewReflect(),onTaskTap})}),getAdministrative().length>0&&(0,jsx_runtime.jsx)("div",{className:"mb-2",children:(0,jsx_runtime.jsx)(CategoryRow.A,{title:"Administrative",icon:"â˜•",tasks:getAdministrative(),onTaskTap})}),(0,jsx_runtime.jsx)("div",{className:"p-2 bg-[#073642] rounded-lg border border-[#268bd2]",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-lg",children:"ðŸ’¡"}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h4",{className:"text-xs font-bold text-[#93a1a1] mb-1",children:"Recovery Tips"}),(0,jsx_runtime.jsxs)("ul",{className:"text-xs text-[#586e75] space-y-0.5",children:[(0,jsx_runtime.jsx)("li",{children:"â€¢ Complete 3 micro-tasks â†’ mystery box"}),(0,jsx_runtime.jsx)("li",{children:"â€¢ Deep breathing for 2min â†’ 10-15% energy"}),(0,jsx_runtime.jsx)("li",{children:"â€¢ Short walks restore cognitive function"})]})]})]})}),0===tasks.filter(t=>"completed"!==t.status).length&&(0,jsx_runtime.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,jsx_runtime.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ’™"}),(0,jsx_runtime.jsx)("h3",{className:"text-xl font-bold text-[#93a1a1] mb-2",children:"Perfect time to rest"}),(0,jsx_runtime.jsx)("p",{className:"text-[#586e75] text-center",children:"No recovery tasks available. Recharge!"})]}),(0,jsx_runtime.jsx)("div",{className:"flex-1 flex items-end justify-center pb-2 mt-2",children:(0,jsx_runtime.jsx)("div",{className:"text-[#586e75] text-xs",children:"End of recovery mode"})})]}),showMysteryBox&&(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,jsx_runtime.jsx)("div",{className:"bg-gradient-to-br from-[#b58900] to-[#cb4b16] rounded-2xl p-6 max-w-sm w-full border-2 border-[#b58900] shadow-2xl animate-pulse",children:(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ"}),(0,jsx_runtime.jsx)("h3",{className:"text-2xl font-bold text-[#fdf6e3] mb-2",children:"Mystery Box!"}),(0,jsx_runtime.jsx)("p",{className:"text-[#fdf6e3] mb-4",children:"3 mender sessions complete!"}),(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-[#fdf6e3] rounded-lg",children:[(0,jsx_runtime.jsx)("div",{className:"text-3xl mb-2",children:"âš¡"}),(0,jsx_runtime.jsx)("p",{className:"text-[#073642] font-bold",children:"+25% Energy Boost"}),(0,jsx_runtime.jsx)("p",{className:"text-[#586e75] text-sm mt-1",children:"Applied to next Hunter session"})]}),(0,jsx_runtime.jsx)("button",{onClick:()=>setShowMysteryBox(!1),className:"mt-4 px-6 py-2 bg-[#fdf6e3] text-[#073642] font-bold rounded-lg",children:"Claim Reward"})]})})})]})};try{MenderMode.displayName="MenderMode",MenderMode.__docgenInfo={description:"",displayName:"MenderMode",props:{energy:{defaultValue:null,description:"",name:"energy",required:!0,type:{name:"number"}},onTaskTap:{defaultValue:null,description:"",name:"onTaskTap",required:!0,type:{name:"(task: Task) => void"}},refreshTrigger:{defaultValue:null,description:"",name:"refreshTrigger",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mobile/modes/MenderMode.tsx#MenderMode"]={docgenInfo:MenderMode.__docgenInfo,name:"MenderMode",path:"src/components/mobile/modes/MenderMode.tsx#MenderMode"})}catch(__react_docgen_typescript_loader_error){}const MenderMode_stories={title:"Components/Mobile/Modes/MenderMode",component:modes_MenderMode,parameters:{layout:"fullscreen",viewport:{defaultViewport:"mobile1"},docs:{description:{component:"**Mender Mode** - Energy tracking and recovery\n\n**Features**:\n- **Circular EnergyGauge**: Visual energy level (0-100%)\n- **5-Minute Recovery Tasks**: Low-effort actions for low energy\n- **Mystery Box Rewards**: Every 3 sessions\n- **Energy-Aware Suggestions**: Task recommendations based on current energy\n\n**ADHD Optimizations**:\n- Respects energy levels (no pushing through fatigue)\n- Visual energy tracking prevents burnout\n- Recovery tasks are always < 5 minutes\n- Mystery rewards maintain engagement"}}},decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{height:"100vh",width:"100%",backgroundColor:"#002b36"},children:(0,jsx_runtime.jsx)(Story,{})})]},Default={args:{}},HighEnergy={args:{},parameters:{docs:{description:{story:"High energy level (> 70%) - suggests action tasks"}}}},LowEnergy={args:{},parameters:{docs:{description:{story:"Low energy level (< 30%) - suggests recovery tasks only"}}}},MysteryReward={args:{},parameters:{docs:{description:{story:"Mystery box reward unlocked after 3 recovery sessions"}}}},__namedExportsOrder=["Default","HighEnergy","LowEnergy","MysteryReward"]}}]);