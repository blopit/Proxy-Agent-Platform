"use strict";(self.webpackChunkproxy_agent_platform_frontend=self.webpackChunkproxy_agent_platform_frontend||[]).push([[212],{"./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/bot.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Bot});const Bot=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},"./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/check-circle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CheckCircle});const CheckCircle=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},"./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/loader-2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Loader2});const Loader2=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},"./src/components/mobile/TaskBreakdownModal.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllAtomicSteps:()=>AllAtomicSteps,Closing:()=>Closing,ComplexTask:()=>ComplexTask,DecompositionInProgress:()=>DecompositionInProgress,Default:()=>Default,FastProcessing:()=>FastProcessing,InteractiveDemo:()=>InteractiveDemo,ManySteps:()=>ManySteps,Opening:()=>Opening,SimpleTask:()=>SimpleTask,SlowProcessing:()=>SlowProcessing,TreeViewOpen:()=>TreeViewOpen,WithClarifications:()=>WithClarifications,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TaskBreakdownModal_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),check_circle=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/check-circle.js"),x=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/x.js"),bot=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/bot.js");function cn(...inputs){const classes=[];for(const input of inputs)if(input)if("string"==typeof input||"number"==typeof input)classes.push(String(input));else if(Array.isArray(input)){const nested=cn(...input);nested&&classes.push(nested)}else if("object"==typeof input)for(const[key,value]of Object.entries(input))value&&classes.push(key);return classes.join(" ")}const Card=react.forwardRef(({className,...props},ref)=>(0,jsx_runtime.jsx)("div",{ref,className:cn("rounded-lg border bg-card text-card-foreground",className),...props}));Card.displayName="Card";const CardHeader=react.forwardRef(({className,...props},ref)=>(0,jsx_runtime.jsx)("div",{ref,className:cn("flex flex-col space-y-1.5 p-6",className),...props}));CardHeader.displayName="CardHeader";const CardTitle=react.forwardRef(({className,...props},ref)=>(0,jsx_runtime.jsx)("div",{ref,className:cn("text-2xl font-semibold leading-none tracking-tight",className),...props}));CardTitle.displayName="CardTitle";const CardDescription=react.forwardRef(({className,...props},ref)=>(0,jsx_runtime.jsx)("div",{ref,className:cn("text-sm text-muted-foreground",className),...props}));CardDescription.displayName="CardDescription";const CardContent=react.forwardRef(({className,...props},ref)=>(0,jsx_runtime.jsx)("div",{ref,className:cn("p-6 pt-0",className),...props}));CardContent.displayName="CardContent";const CardFooter=react.forwardRef(({className,...props},ref)=>(0,jsx_runtime.jsx)("div",{ref,className:cn("flex items-center p-6 pt-0",className),...props}));CardFooter.displayName="CardFooter";try{Card.displayName="Card",Card.__docgenInfo={description:"",displayName:"Card",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/card.tsx#Card"]={docgenInfo:Card.__docgenInfo,name:"Card",path:"src/components/ui/card.tsx#Card"})}catch(__react_docgen_typescript_loader_error){}try{CardHeader.displayName="CardHeader",CardHeader.__docgenInfo={description:"",displayName:"CardHeader",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/card.tsx#CardHeader"]={docgenInfo:CardHeader.__docgenInfo,name:"CardHeader",path:"src/components/ui/card.tsx#CardHeader"})}catch(__react_docgen_typescript_loader_error){}try{CardFooter.displayName="CardFooter",CardFooter.__docgenInfo={description:"",displayName:"CardFooter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/card.tsx#CardFooter"]={docgenInfo:CardFooter.__docgenInfo,name:"CardFooter",path:"src/components/ui/card.tsx#CardFooter"})}catch(__react_docgen_typescript_loader_error){}try{CardTitle.displayName="CardTitle",CardTitle.__docgenInfo={description:"",displayName:"CardTitle",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/card.tsx#CardTitle"]={docgenInfo:CardTitle.__docgenInfo,name:"CardTitle",path:"src/components/ui/card.tsx#CardTitle"})}catch(__react_docgen_typescript_loader_error){}try{CardDescription.displayName="CardDescription",CardDescription.__docgenInfo={description:"",displayName:"CardDescription",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/card.tsx#CardDescription"]={docgenInfo:CardDescription.__docgenInfo,name:"CardDescription",path:"src/components/ui/card.tsx#CardDescription"})}catch(__react_docgen_typescript_loader_error){}try{CardContent.displayName="CardContent",CardContent.__docgenInfo={description:"",displayName:"CardContent",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/card.tsx#CardContent"]={docgenInfo:CardContent.__docgenInfo,name:"CardContent",path:"src/components/ui/card.tsx#CardContent"})}catch(__react_docgen_typescript_loader_error){}const solarized_base01="#586e75",solarized_yellow="#b58900",solarized_red="#dc322f",solarized_green="#859900";function formatEstimatedTime(hours){if(!hours||0===hours)return"~15min";if(hours<1){return`${Math.round(60*hours)}min`}return hours%1==0?`${hours}h`:`${hours.toFixed(1)}h`}function formatMinutes(minutes){if(minutes<60)return`${minutes}min`;const hours=Math.floor(minutes/60),remainingMinutes=minutes%60;return 0===remainingMinutes?`${hours}h`:`${hours}h ${remainingMinutes}min`}function getLeafTypeIcon(leafType){switch(leafType.toUpperCase()){case"DIGITAL":return"ðŸ’»";case"HUMAN":return"ðŸŽ¯";default:return"ðŸ“‹"}}function getBreakdownSummary(breakdown){const{digital_count,human_count,total_minutes}=breakdown,timeStr=formatMinutes(total_minutes);return 0===digital_count&&0===human_count?`No steps â€¢ ${timeStr}`:digital_count>0&&human_count>0?`${digital_count} âš¡ â€¢ ${human_count} ðŸŽ¯ â€¢ ${timeStr}`:digital_count>0?`${digital_count} automatable â€¢ ${timeStr}`:`${human_count} manual â€¢ ${timeStr}`}function getPriorityBadgeClass(priority){const color=function getPriorityColor(priority){switch(priority.toLowerCase()){case"critical":case"urgent":case"high":return solarized_red;case"medium":return solarized_yellow;case"low":return solarized_green;default:return solarized_base01}}(priority);switch(color){case solarized_red:return"bg-[#dc322f] text-[#fdf6e3] border-[#dc322f]";case solarized_yellow:return"bg-[#b58900] text-[#fdf6e3] border-[#b58900]";case solarized_green:return"bg-[#859900] text-[#fdf6e3] border-[#859900]";default:return"bg-[#586e75] text-[#fdf6e3] border-[#586e75]"}}function TaskCardBig({task,onStartTask,onViewDetails,className}){const{title,description,status="pending",priority="medium",estimated_hours,tags=[],micro_steps=[],breakdown,subtask_progress,is_digital}=task,previewSteps=micro_steps.slice(0,3),hasMoreSteps=micro_steps.length>3;return(0,jsx_runtime.jsxs)(Card,{className:`bg-[#073642] border-2 ${"high"===priority||"critical"===priority?"border-[#dc322f]":"medium"===priority?"border-[#b58900]":"border-[#586e75]"} ${className}`,children:[(0,jsx_runtime.jsxs)(CardHeader,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,jsx_runtime.jsx)(CardTitle,{className:"text-[#93a1a1] text-xl font-bold leading-tight flex-1",children:title}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,jsx_runtime.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${getPriorityBadgeClass(priority)}`,children:priority}),estimated_hours&&(0,jsx_runtime.jsx)("span",{className:"text-xs text-[#586e75]",children:formatEstimatedTime(estimated_hours)})]})]}),description&&(0,jsx_runtime.jsx)(CardDescription,{className:"text-[#93a1a1] text-sm leading-relaxed line-clamp-2",children:description}),tags.length>0&&(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:tags.map((tag,index)=>(0,jsx_runtime.jsx)("span",{className:"px-2 py-1 bg-[#002b36] text-[#93a1a1] rounded-full text-xs border border-[#586e75]",children:tag},index))})]}),(0,jsx_runtime.jsxs)(CardContent,{children:[breakdown&&(0,jsx_runtime.jsxs)("div",{className:"mb-4 p-3 bg-[#002b36] rounded-lg border border-[#586e75]",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs font-medium text-[#93a1a1] uppercase tracking-wide",children:"Task Breakdown"}),(0,jsx_runtime.jsxs)("span",{className:"text-xs text-[#586e75]",children:[breakdown.total_steps," steps"]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 h-2 mb-2 rounded-full overflow-hidden",children:[breakdown.digital_count>0&&(0,jsx_runtime.jsx)("div",{className:"bg-[#2aa198]",style:{width:breakdown.digital_count/breakdown.total_steps*100+"%"},title:`${breakdown.digital_count} digital steps`}),breakdown.human_count>0&&(0,jsx_runtime.jsx)("div",{className:"bg-[#268bd2]",style:{width:breakdown.human_count/breakdown.total_steps*100+"%"},title:`${breakdown.human_count} human steps`})]}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-[#93a1a1]",children:getBreakdownSummary(breakdown)})]}),previewSteps.length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h4",{className:"text-xs font-medium text-[#93a1a1] uppercase tracking-wide mb-2",children:"Next Steps"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[previewSteps.map((step,index)=>{return(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-3 p-2 bg-[#002b36] rounded border border-[#586e75] hover:border-[#2aa198] transition-colors relative",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-shrink-0 mt-0.5 relative",children:[(0,jsx_runtime.jsx)("span",{className:"text-lg",title:`${step.leaf_type}${step.icon?` - ${step.short_label||""}`:""}`,children:step.icon?step.icon:getLeafTypeIcon(step.leaf_type)}),"DIGITAL"===step.leaf_type&&(0,jsx_runtime.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-[#2aa198] rounded-full p-0.5 shadow-sm",title:"Can be automated by AI",children:(0,jsx_runtime.jsx)(bot.A,{size:10,className:"text-[#002b36]",strokeWidth:2.5})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-[#93a1a1] leading-relaxed",children:(text=step.description,maxLength=80,text.length<=maxLength?text:text.slice(0,maxLength-3)+"...")}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs text-[#586e75]",children:formatMinutes(step.estimated_minutes)}),(0,jsx_runtime.jsx)("span",{className:"text-xs text-[#586e75]",children:"â€¢"}),(0,jsx_runtime.jsx)("span",{className:"text-xs "+("DIGITAL"===step.leaf_type?"text-[#2aa198]":"text-[#268bd2]"),children:"DIGITAL"===step.leaf_type?"Automatable":"Manual"})]})]}),(0,jsx_runtime.jsx)("div",{className:"flex-shrink-0",children:(0,jsx_runtime.jsxs)("span",{className:"text-xs text-[#586e75] font-medium",children:["#",index+1]})})]},step.step_id);var text,maxLength}),hasMoreSteps&&(0,jsx_runtime.jsxs)("button",{onClick:onViewDetails,className:"w-full p-2 text-xs text-[#268bd2] hover:text-[#2aa198] text-center transition-colors",children:["+",micro_steps.length-3," more steps..."]})]})]}),is_digital&&(0,jsx_runtime.jsxs)("div",{className:"mt-4 flex items-center p-2 bg-[#002b36] rounded-lg border border-[#2aa198]",children:[(0,jsx_runtime.jsx)("span",{className:"text-[#2aa198] mr-2",children:"âš¡"}),(0,jsx_runtime.jsx)("span",{className:"text-[#2aa198] text-sm font-medium",children:"Can be delegated to agents"})]}),subtask_progress&&subtask_progress.total>0&&(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,jsx_runtime.jsx)("span",{className:"text-xs text-[#93a1a1]",children:"Progress"}),(0,jsx_runtime.jsxs)("span",{className:"text-xs text-[#586e75]",children:[subtask_progress.completed," / ",subtask_progress.total," steps"]})]}),(0,jsx_runtime.jsx)("div",{className:"h-2 bg-[#002b36] rounded-full overflow-hidden",children:(0,jsx_runtime.jsx)("div",{className:"h-full bg-[#859900] transition-all duration-300",style:{width:`${subtask_progress.percentage}%`}})})]})]}),(onStartTask||onViewDetails)&&(0,jsx_runtime.jsxs)(CardFooter,{className:"flex gap-2",children:[onStartTask&&(0,jsx_runtime.jsx)("button",{onClick:onStartTask,className:"flex-1 px-4 py-2 bg-[#2aa198] hover:bg-[#2aa198]/90 text-[#002b36] font-medium rounded-lg transition-colors active:scale-95",children:"Start First Step"}),onViewDetails&&(0,jsx_runtime.jsx)("button",{onClick:onViewDetails,className:"px-4 py-2 bg-[#073642] hover:bg-[#002b36] text-[#93a1a1] border border-[#586e75] rounded-lg transition-colors active:scale-95",children:"View All"})]})]})}try{TaskCardBig.displayName="TaskCardBig",TaskCardBig.__docgenInfo={description:"TaskCardBig Component\nDisplays task with micro-steps preview and breakdown visualization",displayName:"TaskCardBig",props:{task:{defaultValue:null,description:"",name:"task",required:!0,type:{name:"TaskCardProps"}},onStartTask:{defaultValue:null,description:"",name:"onStartTask",required:!1,type:{name:"(() => void) | undefined"}},onViewDetails:{defaultValue:null,description:"",name:"onViewDetails",required:!1,type:{name:"(() => void) | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mobile/cards/TaskCardBig.tsx#TaskCardBig"]={docgenInfo:TaskCardBig.__docgenInfo,name:"TaskCardBig",path:"src/components/mobile/cards/TaskCardBig.tsx#TaskCardBig"})}catch(__react_docgen_typescript_loader_error){}var loader_2=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/loader-2.js");const ChevronRight=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var design_system=__webpack_require__("./src/lib/design-system.ts");const HIERARCHY_CONFIG={0:{name:"initiative",emoji:"ðŸŽ¯",color:design_system.Tj.red,bgColor:`${design_system.Tj.red}20`,label:"Initiative",description:"The big vision",timeRange:"5+ years",splitRange:[2,6]},1:{name:"phase",emoji:"ðŸ“…",color:design_system.Tj.magenta,bgColor:`${design_system.Tj.magenta}20`,label:"Phase",description:"Major milestone",timeRange:"1-5 years",splitRange:[2,6]},2:{name:"epic",emoji:"ðŸš€",color:design_system.Tj.blue,bgColor:`${design_system.Tj.blue}20`,label:"Epic",description:"Feature set",timeRange:"Weeks to months",splitRange:[4,50]},3:{name:"sprint",emoji:"âš¡",color:design_system.Tj.yellow,bgColor:`${design_system.Tj.yellow}20`,label:"Sprint",description:"Sprint cycle",timeRange:"1-2 weeks",splitRange:[2,6]},4:{name:"task",emoji:"ðŸ“‹",color:design_system.Tj.cyan,bgColor:`${design_system.Tj.cyan}20`,label:"Task",description:"Work session",timeRange:"1-8 hours",splitRange:[2,6]},5:{name:"subtask",emoji:"âœ“",color:design_system.Tj.green,bgColor:`${design_system.Tj.green}20`,label:"Subtask",description:"Focused action",timeRange:"3-15 minutes",splitRange:[2,6]},6:{name:"step",emoji:"ðŸ‘†",color:design_system.Tj.base1,bgColor:`${design_system.Tj.base1}20`,label:"Step",description:"Atomic unit",timeRange:"2-5 minutes",splitRange:[1,1]}},DECOMPOSITION_INDICATORS_stub="â–¼",DECOMPOSITION_INDICATORS_decomposed="â–²",DECOMPOSITION_INDICATORS_atomic="âœ“";function hierarchy_config_formatDuration(minutes){if(minutes<60)return`${minutes}min`;if(minutes<1440){return`${Math.round(minutes/60)}h`}if(minutes<10080){return`${Math.round(minutes/1440)}d`}if(minutes<43200){return`${Math.round(minutes/10080)}w`}if(minutes<525600){return`${Math.round(minutes/43200)}mo`}return`${(minutes/525600).toFixed(1)}y`}function HierarchyTreeNode({node,depth=0,isExpanded=!1,onExpand,onCollapse,onStartWork,onDecompose,showChildren=!0,className=""}){const[isDecomposing,setIsDecomposing]=(0,react.useState)(!1),config=function hierarchy_config_getLevelConfig(level){return HIERARCHY_CONFIG[level]}(node.level),indentWidth=16*depth,canExpand=!node.is_leaf&&"atomic"!==node.decomposition_state&&node.level<6,canDecompose="stub"===node.decomposition_state&&!node.is_leaf&&node.level<6,handleToggle=async()=>{if(!isDecomposing)if(isExpanded)null==onCollapse||onCollapse(node.task_id);else if("stub"===node.decomposition_state&&onExpand){setIsDecomposing(!0);try{await onExpand(node.task_id)}finally{setIsDecomposing(!1)}}else onExpand&&await onExpand(node.task_id)},getIndicator=()=>isDecomposing?(0,jsx_runtime.jsx)(loader_2.A,{size:design_system.RK.sm,className:"animate-spin"}):"atomic"===node.decomposition_state||node.is_leaf?DECOMPOSITION_INDICATORS_atomic:"stub"===node.decomposition_state?DECOMPOSITION_INDICATORS_stub:isExpanded?DECOMPOSITION_INDICATORS_decomposed:DECOMPOSITION_INDICATORS_stub,primaryEmoji=node.custom_emoji||node.icon||config.emoji;return(0,jsx_runtime.jsxs)("div",{className,children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 py-2 px-3 rounded-lg hover:bg-[#073642] transition-colors cursor-pointer",style:{marginLeft:`${indentWidth}px`,borderLeft:depth>0?`2px solid ${config.color}20`:"none"},onClick:canExpand?handleToggle:void 0,children:[depth>0&&(0,jsx_runtime.jsx)("div",{className:"absolute h-2 border-b-2",style:{left:indentWidth-8+"px",width:"8px",borderColor:`${config.color}40`}}),canExpand?(0,jsx_runtime.jsx)("button",{className:"flex-shrink-0 p-1 hover:bg-[#002b36] rounded transition-all",onClick:e=>{e.stopPropagation(),handleToggle()},disabled:isDecomposing,children:"string"==typeof getIndicator()?(0,jsx_runtime.jsx)("span",{className:"text-sm",children:getIndicator()}):getIndicator()}):(0,jsx_runtime.jsx)("div",{className:"w-6"}),(0,jsx_runtime.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,jsx_runtime.jsx)("span",{className:"text-xl",title:`${config.label} - Level ${node.level}`,children:primaryEmoji}),node.is_leaf&&"DIGITAL"===node.leaf_type&&(0,jsx_runtime.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-[#2aa198] rounded-full p-0.5 shadow-sm",title:"Can be automated by AI",children:(0,jsx_runtime.jsx)(bot.A,{size:8,className:"text-[#002b36]",strokeWidth:2.5})}),(0,jsx_runtime.jsx)("div",{className:"absolute -top-1 -left-1 w-4 h-4 flex items-center justify-center rounded-full text-[10px] font-bold",style:{backgroundColor:config.color,color:"#fff",opacity:.7},children:node.level})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("h4",{className:"font-medium truncate",style:{fontSize:design_system.J.sm,color:design_system.ZI.text.primary},children:node.title}),(0,jsx_runtime.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:`${config.color}20`,color:config.color},children:hierarchy_config_formatDuration(node.total_minutes||node.estimated_minutes)})]}),node.description&&depth<3&&(0,jsx_runtime.jsx)("p",{className:"text-xs truncate opacity-70 mt-1",style:{color:design_system.ZI.text.secondary},children:node.description})]}),canDecompose&&onDecompose&&(0,jsx_runtime.jsx)("button",{className:"flex-shrink-0 px-3 py-1 rounded-lg font-medium text-xs transition-all hover:scale-105 active:scale-95 flex items-center gap-1",style:{backgroundColor:"#268bd2",color:"#fff",opacity:isDecomposing?.6:1},onClick:async e=>{if(e.stopPropagation(),!isDecomposing&&onDecompose){setIsDecomposing(!0);try{await onDecompose(node.task_id)}finally{setIsDecomposing(!1)}}},disabled:isDecomposing,children:isDecomposing?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(loader_2.A,{size:12,className:"animate-spin"}),(0,jsx_runtime.jsx)("span",{children:"Decomposing..."})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{children:"ðŸ”¨"}),(0,jsx_runtime.jsx)("span",{children:"Decompose"})]})}),node.is_leaf&&onStartWork&&(0,jsx_runtime.jsx)("button",{className:"flex-shrink-0 px-3 py-1 rounded-lg font-medium text-xs transition-all hover:scale-105 active:scale-95",style:{backgroundColor:design_system.ZI.accent.primary,color:design_system.ZI.bg.primary},onClick:e=>{e.stopPropagation(),onStartWork(node.task_id)},children:"Start"}),!canExpand&&!node.is_leaf&&(0,jsx_runtime.jsx)(ChevronRight,{size:design_system.RK.sm,style:{color:design_system.ZI.text.secondary}})]}),isExpanded&&showChildren&&node.children&&node.children.length>0&&(0,jsx_runtime.jsx)("div",{className:"mt-1",children:node.children.map((child,index)=>(0,jsx_runtime.jsx)(HierarchyTreeNode,{node:child,depth:depth+1,onExpand,onCollapse,onStartWork,onDecompose},child.task_id))}),!isExpanded&&node.children_ids.length>0&&(0,jsx_runtime.jsxs)("div",{className:"ml-12 mt-1 text-xs opacity-50",style:{color:design_system.ZI.text.secondary},children:[node.children_ids.length," ",1===node.children_ids.length?"item":"items"]})]})}function CompactHierarchyNode({node}){const config=getLevelConfig(node.level),primaryEmoji=node.custom_emoji||node.icon||config.emoji;return _jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-[#073642]",children:[_jsx("span",{className:"text-lg",children:primaryEmoji}),_jsx("span",{className:"text-sm flex-1 truncate",style:{color:semanticColors.text.primary},children:node.title}),_jsx("span",{className:"text-xs opacity-60",style:{color:semanticColors.text.secondary},children:formatDuration(node.estimated_minutes)})]})}try{HierarchyTreeNode.displayName="HierarchyTreeNode",HierarchyTreeNode.__docgenInfo={description:"HierarchyTreeNode Component\nRenders a single node in the hierarchy tree with expand/collapse functionality",displayName:"HierarchyTreeNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"TaskNode"}},depth:{defaultValue:{value:"0"},description:"",name:"depth",required:!1,type:{name:"number | undefined"}},isExpanded:{defaultValue:{value:"false"},description:"",name:"isExpanded",required:!1,type:{name:"boolean | undefined"}},onExpand:{defaultValue:null,description:"",name:"onExpand",required:!1,type:{name:"((nodeId: string) => Promise<void>) | undefined"}},onCollapse:{defaultValue:null,description:"",name:"onCollapse",required:!1,type:{name:"((nodeId: string) => void) | undefined"}},onStartWork:{defaultValue:null,description:"",name:"onStartWork",required:!1,type:{name:"((nodeId: string) => void) | undefined"}},onDecompose:{defaultValue:null,description:"",name:"onDecompose",required:!1,type:{name:"((nodeId: string) => Promise<void>) | undefined"}},showChildren:{defaultValue:{value:"true"},description:"",name:"showChildren",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mobile/HierarchyTreeNode.tsx#HierarchyTreeNode"]={docgenInfo:HierarchyTreeNode.__docgenInfo,name:"HierarchyTreeNode",path:"src/components/mobile/HierarchyTreeNode.tsx#HierarchyTreeNode"})}catch(__react_docgen_typescript_loader_error){}try{CompactHierarchyNode.displayName="CompactHierarchyNode",CompactHierarchyNode.__docgenInfo={description:"Compact variant - minimal information",displayName:"CompactHierarchyNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"TaskNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mobile/HierarchyTreeNode.tsx#CompactHierarchyNode"]={docgenInfo:CompactHierarchyNode.__docgenInfo,name:"CompactHierarchyNode",path:"src/components/mobile/HierarchyTreeNode.tsx#CompactHierarchyNode"})}catch(__react_docgen_typescript_loader_error){}var AsyncJobTimeline=__webpack_require__("./src/components/shared/AsyncJobTimeline.tsx");var taskApi=__webpack_require__("./src/services/taskApi.ts"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function TaskBreakdownModal({captureResponse,isOpen,onClose,onStartTask,onViewAllTasks}){const[showContent,setShowContent]=(0,react.useState)(!1),[showCelebration,setShowCelebration]=(0,react.useState)(!1),[expandedNodes,setExpandedNodes]=(0,react.useState)(new Set),[showHierarchyView,setShowHierarchyView]=(0,react.useState)(!1),[decomposingNodeId,setDecomposingNodeId]=(0,react.useState)(null),[decompositionSteps,setDecompositionSteps]=(0,react.useState)([]),[decompositionProgress,setDecompositionProgress]=(0,react.useState)(0),[hierarchyTree,setHierarchyTree]=(0,react.useState)(null);if((0,react.useEffect)(()=>{isOpen&&captureResponse?(setShowCelebration(!0),setTimeout(()=>setShowCelebration(!1),1500),setTimeout(()=>setShowContent(!0),100),setHierarchyTree(convertToHierarchyTree())):(setShowContent(!1),setHierarchyTree(null))},[isOpen,captureResponse]),!isOpen||!captureResponse)return null;const taskCardProps=function captureResponseToCardProps(response){const{task,micro_steps,breakdown}=response,is_digital=breakdown.digital_count>breakdown.human_count,subtask_progress={completed:0,total:micro_steps.length,percentage:0},estimated_minutes=task.estimated_hours?Math.round(60*task.estimated_hours):breakdown.total_minutes;return{title:task.title,description:task.description,status:"pending",priority:task.priority.toLowerCase(),estimated_hours:task.estimated_hours,estimated_minutes,tags:task.tags,is_digital,micro_steps,breakdown,progress:0,subtask_progress,has_dependencies:!1,created_at:(new Date).toISOString()}}(captureResponse),convertToHierarchyTree=()=>{if(!captureResponse)return null;return{task_id:"root",title:captureResponse.task.title,description:captureResponse.task.description,level:0,children_ids:captureResponse.micro_steps.map(s=>s.step_id),children:captureResponse.micro_steps.map((step,index)=>{var _step_is_leaf;return{task_id:step.step_id,title:step.description,level:step.level||6,parent_id:"root",children_ids:[],estimated_minutes:step.estimated_minutes,total_minutes:step.total_minutes||step.estimated_minutes,decomposition_state:step.decomposition_state||"atomic",is_leaf:null===(_step_is_leaf=step.is_leaf)||void 0===_step_is_leaf||_step_is_leaf,leaf_type:step.leaf_type,icon:step.icon,custom_emoji:step.custom_emoji,delegation_mode:step.delegation_mode,step_number:index+1}}),estimated_minutes:Math.round(60*(captureResponse.task.estimated_hours||0)),total_minutes:captureResponse.breakdown.total_minutes,decomposition_state:"decomposed",is_leaf:!1,priority:captureResponse.task.priority,tags:captureResponse.task.tags}},handleExpand=async nodeId=>{const findNode=node=>{if(node.task_id===nodeId)return node;if(node.children)for(const child of node.children){const found=findNode(child);if(found)return found}return null},node=hierarchyTree?findNode(hierarchyTree):null;if(node&&"stub"===node.decomposition_state){setDecomposingNodeId(nodeId),setDecompositionSteps([{id:"analyze",description:"Analyze complexity",shortLabel:"Analyzing",detail:"Understanding task structure...",estimatedMinutes:0,leafType:"DIGITAL",icon:"ðŸ”",status:"active"},{id:"breakdown",description:"Break into subtasks",shortLabel:"Breaking down",detail:"Creating micro-steps...",estimatedMinutes:0,leafType:"DIGITAL",icon:"ðŸ”¨",status:"pending"},{id:"classify",description:"Classify steps",shortLabel:"Classifying",detail:"Detecting task types...",estimatedMinutes:0,leafType:"DIGITAL",icon:"ðŸ·ï¸",status:"pending"},{id:"save",description:"Save results",shortLabel:"Saving",detail:"Updating task tree...",estimatedMinutes:0,leafType:"DIGITAL",icon:"ðŸ’¾",status:"pending"}]),setDecompositionProgress(0);const progressInterval=setInterval(()=>{setDecompositionProgress(prev=>{const newProgress=prev+.5;return newProgress>=100?(clearInterval(progressInterval),100):(newProgress>=10&&newProgress<30?setDecompositionSteps(steps=>steps.map((s,i)=>0===i?{...s,status:"done"}:1===i?{...s,status:"active"}:s)):newProgress>=30&&newProgress<60?setDecompositionSteps(steps=>steps.map((s,i)=>i<=1?{...s,status:"done"}:2===i?{...s,status:"active"}:s)):newProgress>=60&&newProgress<90&&setDecompositionSteps(steps=>steps.map((s,i)=>i<=2?{...s,status:"done"}:3===i?{...s,status:"active"}:s)),newProgress)})},40);try{const response=await taskApi.taskApi.breakDownTask(nodeId);clearInterval(progressInterval),setDecompositionSteps(steps=>steps.map(s=>({...s,status:"done"}))),setDecompositionProgress(100);const updateNodeChildren=node=>node.task_id===nodeId?{...node,decomposition_state:"decomposed",children:response.subtasks.map(subtask=>{var _subtask_is_leaf;return{task_id:subtask.task_id||subtask.step_id,title:subtask.title||subtask.description,description:subtask.description,level:subtask.level||node.level+1,parent_id:nodeId,children_ids:[],estimated_minutes:subtask.estimated_minutes,total_minutes:subtask.total_minutes||subtask.estimated_minutes,decomposition_state:subtask.decomposition_state||"atomic",is_leaf:null===(_subtask_is_leaf=subtask.is_leaf)||void 0===_subtask_is_leaf||_subtask_is_leaf,leaf_type:subtask.leaf_type,icon:subtask.icon,custom_emoji:subtask.custom_emoji,delegation_mode:subtask.delegation_mode}}),children_ids:response.subtasks.map(s=>s.task_id||s.step_id)}:node.children?{...node,children:node.children.map(updateNodeChildren)}:node;hierarchyTree&&setHierarchyTree(updateNodeChildren(hierarchyTree)),setTimeout(()=>{setExpandedNodes(prev=>new Set(prev).add(nodeId)),setDecomposingNodeId(null),setDecompositionSteps([]),setDecompositionProgress(0)},1e3)}catch(error){console.error("Error decomposing task:",error),clearInterval(progressInterval),setDecomposingNodeId(null),setDecompositionSteps([]),setDecompositionProgress(0);(await __webpack_require__.e(865).then(__webpack_require__.bind(__webpack_require__,"./node_modules/.pnpm/react-hot-toast@2.6.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-hot-toast/dist/index.mjs"))).default.error("Failed to decompose task. Please try again.")}}else setExpandedNodes(prev=>new Set(prev).add(nodeId))},handleStartTask=()=>{null==onStartTask||onStartTask(),onClose()},handleViewAll=()=>{null==onViewAllTasks||onViewAllTasks(),onClose()};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 bg-black/60 z-40 transition-opacity duration-300 "+(isOpen?"opacity-100":"opacity-0 pointer-events-none"),onClick:onClose}),(0,jsx_runtime.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-50 transition-transform duration-300 ease-out "+(showContent?"translate-y-0":"translate-y-full"),children:(0,jsx_runtime.jsxs)("div",{className:"bg-[#002b36] rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#586e75]",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(check_circle.A,{size:20,className:"text-[#859900]"}),(0,jsx_runtime.jsx)("h2",{className:"text-lg font-bold text-[#93a1a1]",children:"Task Captured Successfully!"})]}),(0,jsx_runtime.jsx)("button",{onClick:onClose,className:"p-1 hover:bg-[#073642] rounded-lg transition-colors","aria-label":"Close",children:(0,jsx_runtime.jsx)(x.A,{size:20,className:"text-[#93a1a1]"})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4 p-3 bg-[#859900]/10 border border-[#859900] rounded-lg",children:(0,jsx_runtime.jsxs)("p",{className:"text-sm text-[#859900] text-center",children:["Your task has been broken down into"," ",(0,jsx_runtime.jsxs)("span",{className:"font-bold",children:[captureResponse.breakdown.total_steps," actionable steps"]})," ","in"," ",(0,jsx_runtime.jsxs)("span",{className:"font-bold",children:[Math.round(captureResponse.processing_time_ms),"ms"]})]})}),(0,jsx_runtime.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setShowHierarchyView(!1),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all "+(showHierarchyView?"bg-[#073642] text-[#93a1a1] border border-[#586e75]":"bg-[#268bd2] text-white"),children:"ðŸ“‹ Card View"}),(0,jsx_runtime.jsx)("button",{onClick:()=>setShowHierarchyView(!0),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all "+(showHierarchyView?"bg-[#268bd2] text-white":"bg-[#073642] text-[#93a1a1] border border-[#586e75]"),children:"ðŸŒ³ Tree View"})]}),showHierarchyView?(0,jsx_runtime.jsxs)("div",{className:"bg-[#073642] rounded-lg p-4 border border-[#586e75]",children:[(0,jsx_runtime.jsxs)("h3",{className:"text-sm font-medium text-[#93a1a1] mb-3 flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"ðŸŒ³"}),(0,jsx_runtime.jsx)("span",{children:"Hierarchy Breakdown"})]}),decomposingNodeId&&decompositionSteps.length>0&&(0,jsx_runtime.jsx)("div",{className:"mb-4 p-3 bg-[#002b36] rounded-lg border border-[#268bd2]",children:(0,jsx_runtime.jsx)(AsyncJobTimeline.A,{jobName:"Decomposing task...",steps:decompositionSteps,currentProgress:decompositionProgress,size:"full",showProgressBar:!0})}),hierarchyTree?(0,jsx_runtime.jsx)(HierarchyTreeNode,{node:hierarchyTree,isExpanded:expandedNodes.has(hierarchyTree.task_id),onExpand:handleExpand,onCollapse:nodeId=>{setExpandedNodes(prev=>{const next=new Set(prev);return next.delete(nodeId),next})},onDecompose:handleExpand,onStartWork:nodeId=>{console.log("Start work on:",nodeId),handleStartTask()}}):(0,jsx_runtime.jsx)("p",{className:"text-sm text-[#586e75] text-center py-4",children:"No hierarchy available"})]}):(0,jsx_runtime.jsx)(TaskCardBig,{task:taskCardProps,onStartTask:handleStartTask,onViewDetails:handleViewAll}),(0,jsx_runtime.jsx)("div",{className:"mt-4 p-3 bg-[#073642] rounded-lg border border-[#586e75]",children:(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Processing Time"}),(0,jsx_runtime.jsxs)("span",{className:"text-[#93a1a1] font-medium",children:[Math.round(captureResponse.processing_time_ms),"ms"]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Breakdown"}),(0,jsx_runtime.jsxs)("span",{className:"text-[#93a1a1] font-medium",children:[captureResponse.breakdown.digital_count," âš¡ /"," ",captureResponse.breakdown.human_count," ðŸŽ¯"]})]}),captureResponse.voice_processed&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Input Method"}),(0,jsx_runtime.jsx)("span",{className:"text-[#93a1a1] font-medium",children:"Voice"})]}),captureResponse.location_captured&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Location"}),(0,jsx_runtime.jsx)("span",{className:"text-[#93a1a1] font-medium",children:"Captured"})]})]})}),captureResponse.needs_clarification&&captureResponse.clarifications.length>0&&(0,jsx_runtime.jsxs)("div",{className:"mt-4 p-3 bg-[#268bd2]/10 border border-[#268bd2] rounded-lg",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium text-[#268bd2] mb-2",children:"Additional Information Needed"}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:captureResponse.clarifications.map((clarification,index)=>(0,jsx_runtime.jsxs)("div",{className:"text-sm",children:[(0,jsx_runtime.jsxs)("p",{className:"text-[#93a1a1] mb-1",children:[(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:[clarification.field,":"]})," ",clarification.question]}),clarification.options&&clarification.options.length>0&&(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:clarification.options.map((option,optIndex)=>(0,jsx_runtime.jsx)("button",{className:"px-2 py-1 text-xs bg-[#073642] text-[#93a1a1] rounded border border-[#586e75] hover:border-[#268bd2] transition-colors",children:option},optIndex))})]},index))})]})]}),(0,jsx_runtime.jsx)("div",{className:"p-4 border-t border-[#586e75] bg-[#073642]",children:(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)("button",{onClick:handleStartTask,className:"flex-1 px-4 py-3 bg-[#2aa198] hover:bg-[#2aa198]/90 text-[#002b36] font-bold rounded-lg transition-all active:scale-95 shadow-lg",children:"Start First Step"}),(0,jsx_runtime.jsx)("button",{onClick:handleViewAll,className:"px-4 py-3 bg-[#073642] hover:bg-[#002b36] text-[#93a1a1] border border-[#586e75] rounded-lg transition-all active:scale-95",children:"View All"}),(0,jsx_runtime.jsx)("button",{onClick:onClose,className:"px-4 py-3 bg-[#073642] hover:bg-[#002b36] text-[#586e75] border border-[#586e75] rounded-lg transition-all active:scale-95",children:"Close"})]})})]})}),showCelebration&&(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:(0,jsx_runtime.jsx)("div",{className:"animate-bounce",children:(0,jsx_runtime.jsx)("div",{className:"text-8xl",children:"âœ…"})})})]})}try{TaskBreakdownModal.displayName="TaskBreakdownModal",TaskBreakdownModal.__docgenInfo={description:"TaskBreakdownModal Component\nDisplays successful task capture with breakdown visualization",displayName:"TaskBreakdownModal",props:{captureResponse:{defaultValue:null,description:"",name:"captureResponse",required:!0,type:{name:"CaptureResponse | null"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onStartTask:{defaultValue:null,description:"",name:"onStartTask",required:!1,type:{name:"(() => void) | undefined"}},onViewAllTasks:{defaultValue:null,description:"",name:"onViewAllTasks",required:!1,type:{name:"(() => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mobile/TaskBreakdownModal.tsx#TaskBreakdownModal"]={docgenInfo:TaskBreakdownModal.__docgenInfo,name:"TaskBreakdownModal",path:"src/components/mobile/TaskBreakdownModal.tsx#TaskBreakdownModal"})}catch(__react_docgen_typescript_loader_error){}var TaskBreakdownModal_stories_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const TaskBreakdownModal_stories={title:"Components/Mobile/TaskBreakdownModal",component:TaskBreakdownModal,parameters:{layout:"fullscreen",viewport:{defaultViewport:"mobile1"},docs:{description:{component:'**TaskBreakdownModal** - Slide-up modal showing task breakdown after capture\n\n**Key Features**:\n- **Card View**: Traditional task card with action buttons\n- **Tree View**: Hierarchical breakdown with 7-level decomposition\n- **Live Decomposition**: AsyncJobTimeline shows real-time decomposition progress\n- **Interactive Expansion**: Click "ðŸ”¨ Decompose" button to break down tasks further\n- **Celebration Animation**: Success feedback after capture\n\n**Decomposition Flow**:\n1. User captures task â†’ Modal opens\n2. Switch to Tree View\n3. Click "ðŸ”¨ Decompose" on non-atomic tasks\n4. AsyncJobTimeline appears showing 4 steps:\n   - ðŸ” Analyze complexity\n   - ðŸ”¨ Break into subtasks\n   - ðŸ·ï¸ Classify steps\n   - ðŸ’¾ Save results\n5. Tree updates with new children\n6. Timeline transforms into actual subtasks\n\n**ADHD Optimizations**:\n- Celebration animation for dopamine reward\n- Clear action buttons (Start / View All)\n- Processing time displayed for transparency\n- Hierarchical view helps understand complexity'}}},decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{height:"100vh",width:"100%",backgroundColor:"#002b36"},children:(0,jsx_runtime.jsx)(Story,{})})]},sampleCaptureResponse={task:{task_id:"task-123",title:"Set up smart AC automation",description:"Automatically turn off AC when leaving home using geofence",status:"pending",priority:"medium",tags:["ðŸ  Home","ðŸ¤– Automation"],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),estimated_hours:.25},micro_steps:[{step_id:"step-1",description:"Research smart plug options",short_label:"Research",estimated_minutes:5,total_minutes:5,leaf_type:"HUMAN",icon:"ðŸ”",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["ðŸŽ¯ Focused"]},{step_id:"step-2",description:"Set up IFTTT geofence trigger",short_label:"Setup geofence",estimated_minutes:7,total_minutes:7,leaf_type:"DIGITAL",icon:"ðŸŒ",is_leaf:!1,decomposition_state:"stub",level:5,tags:["ðŸ¤– Auto","ðŸ§© Complex"]},{step_id:"step-3",description:"Test automation when leaving",short_label:"Test",estimated_minutes:3,total_minutes:3,leaf_type:"HUMAN",icon:"ðŸ§ª",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["âš¡ Quick Win"]}],breakdown:{total_steps:3,total_minutes:15,digital_count:1,human_count:2},processing_time_ms:8234,needs_clarification:!1,clarifications:[]},complexCaptureResponse={task:{task_id:"task-456",title:"Write comprehensive project documentation",description:"Create README, API docs, and deployment guide",status:"pending",priority:"high",tags:["ðŸ“ Docs","ðŸŽ¯ Focused"],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),estimated_hours:2},micro_steps:[{step_id:"step-1",description:"Draft README.md overview",short_label:"README",estimated_minutes:20,total_minutes:20,leaf_type:"HUMAN",icon:"ðŸ“„",is_leaf:!1,decomposition_state:"stub",level:5,tags:[]},{step_id:"step-2",description:"Document API endpoints",short_label:"API docs",estimated_minutes:45,total_minutes:45,leaf_type:"HUMAN",icon:"ðŸ”Œ",is_leaf:!1,decomposition_state:"stub",level:5,tags:["ðŸ§© Complex"]},{step_id:"step-3",description:"Write deployment guide",short_label:"Deploy guide",estimated_minutes:30,total_minutes:30,leaf_type:"HUMAN",icon:"ðŸš€",is_leaf:!1,decomposition_state:"stub",level:5,tags:[]},{step_id:"step-4",description:"Generate docs site with Docusaurus",short_label:"Build site",estimated_minutes:15,total_minutes:15,leaf_type:"DIGITAL",icon:"ðŸ—ï¸",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["ðŸ¤– Auto"]}],breakdown:{total_steps:4,total_minutes:110,digital_count:1,human_count:3},processing_time_ms:12456,needs_clarification:!1,clarifications:[]},simpleTaskResponse={task:{task_id:"task-789",title:"Email Sara about meeting",description:"Send quick update email",status:"pending",priority:"low",tags:["ðŸ“§ Email"],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),estimated_hours:.1},micro_steps:[{step_id:"step-1",description:"Draft email message",short_label:"Draft",estimated_minutes:3,total_minutes:3,leaf_type:"HUMAN",icon:"âœï¸",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["âš¡ Quick Win"]},{step_id:"step-2",description:"Send via Gmail",short_label:"Send",estimated_minutes:0,total_minutes:0,leaf_type:"DIGITAL",icon:"ðŸ“§",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["ðŸ¤– Auto"]}],breakdown:{total_steps:2,total_minutes:3,digital_count:1,human_count:1},processing_time_ms:3421,needs_clarification:!1,clarifications:[]},Default={args:{captureResponse:sampleCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Default modal state after successful task capture. Shows card view by default."}}}},TreeViewOpen={args:{captureResponse:sampleCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},render:args=>{const[showTree,setShowTree]=react.useState(!0);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"fixed",top:20,right:20,zIndex:100,background:"#073642",padding:"12px",borderRadius:"8px"},children:(0,jsx_runtime.jsx)("button",{onClick:()=>setShowTree(!showTree),style:{background:"#268bd2",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer"},children:"Toggle View"})}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{...args})]})},parameters:{docs:{description:{story:"Modal with tree view showing hierarchical task breakdown. Click nodes to expand/collapse."}}}},ComplexTask={args:{captureResponse:complexCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Complex task with multiple decomposable steps. Each step can be broken down further."}}}},SimpleTask={args:{captureResponse:simpleTaskResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Simple 2-step task - all atomic, nothing to decompose further."}}}},DecompositionInProgress={render:()=>{const[isOpen,setIsOpen]=react.useState(!0),[showDecomposition,setShowDecomposition]=react.useState(!1);return react.useEffect(()=>{const timer=setTimeout(()=>{setShowDecomposition(!0)},2e3);return()=>clearTimeout(timer)},[]),(0,jsx_runtime.jsxs)("div",{children:[showDecomposition&&(0,jsx_runtime.jsx)("div",{style:{position:"fixed",top:20,left:20,right:20,zIndex:100,background:"#268bd2",padding:"16px",borderRadius:"8px",color:"#fff",textAlign:"center",fontWeight:"bold"},children:"âš¡ Decomposition Demo: Watch the AsyncJobTimeline appear!"}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:sampleCaptureResponse,isOpen,onClose:()=>setIsOpen(!1),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all")})]})},parameters:{docs:{description:{story:'Shows the decomposition process with AsyncJobTimeline. Click "ðŸ”¨ Decompose" button on stub nodes.'}}}},WithClarifications={args:{captureResponse:{...sampleCaptureResponse,needs_clarification:!0,clarifications:[{field:"smart_plug_brand",question:"Which smart plug brand do you prefer?",options:["TP-Link","Wemo","Amazon Smart Plug"]},{field:"geofence_radius",question:"What distance should trigger the automation?",options:["100m","500m","1km"]}]},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"Task requires clarification - shows questions with option chips."}}}},InteractiveDemo={render:()=>{const[isOpen,setIsOpen]=react.useState(!0),[captureData,setCaptureData]=react.useState(sampleCaptureResponse);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{style:{position:"fixed",top:20,left:20,right:20,zIndex:100,background:"#073642",padding:"12px 16px",borderRadius:"8px",border:"1px solid #586e75"},children:(0,jsx_runtime.jsxs)("p",{style:{color:"#93a1a1",fontSize:"12px",margin:0},children:["ðŸ’¡ ",(0,jsx_runtime.jsx)("strong",{children:"Tip:"}),' Switch to Tree View, then click "ðŸ”¨ Decompose" on the middle step (geofence setup)']})}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:captureData,isOpen,onClose:()=>setIsOpen(!1),onStartTask:()=>{TaskBreakdownModal_stories_console.log("â–¶ï¸ Starting task..."),setIsOpen(!1)},onViewAllTasks:()=>{TaskBreakdownModal_stories_console.log("ðŸ“‹ Viewing all tasks..."),setIsOpen(!1)}})]})},parameters:{docs:{description:{story:"Fully interactive demo - try decomposing tasks and see the AsyncJobTimeline in action!"}}}},AllAtomicSteps={args:{captureResponse:{...simpleTaskResponse,micro_steps:simpleTaskResponse.micro_steps.map(step=>({...step,is_leaf:!0,decomposition_state:"atomic"}))},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"All steps are atomic - no decompose buttons should appear."}}}},ManySteps={args:{captureResponse:{...complexCaptureResponse,micro_steps:Array.from({length:12},(_,i)=>({step_id:`step-${i+1}`,description:`Task step number ${i+1}`,short_label:`Step ${i+1}`,estimated_minutes:Math.floor(15*Math.random())+1,total_minutes:Math.floor(15*Math.random())+1,leaf_type:i%2==0?"HUMAN":"DIGITAL",icon:["ðŸ“","ðŸ”§","ðŸŽ¨","ðŸ’¡","ðŸš€","âš™ï¸","ðŸ”","ðŸŽ¯"][i%8],is_leaf:i%3==0,decomposition_state:i%3==0?"atomic":"stub",level:5,tags:[]})),breakdown:{total_steps:12,total_minutes:120,digital_count:6,human_count:6}},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"Many steps (12) - tests scrolling and layout with large task lists."}}}},FastProcessing={args:{captureResponse:{...sampleCaptureResponse,processing_time_ms:234},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"Very fast processing time (234ms) displayed."}}}},SlowProcessing={args:{captureResponse:{...complexCaptureResponse,processing_time_ms:45678},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"Slow processing time (45s) for complex task."}}}},Opening={render:()=>{const[isOpen,setIsOpen]=react.useState(!1);return react.useEffect(()=>{const timer=setTimeout(()=>setIsOpen(!0),500);return()=>clearTimeout(timer)},[]),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:sampleCaptureResponse,isOpen,onClose:()=>setIsOpen(!1)})},parameters:{docs:{description:{story:"Shows the slide-up opening animation."}}}},Closing={render:()=>{const[isOpen,setIsOpen]=react.useState(!0);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setIsOpen(!1),style:{position:"fixed",top:20,right:20,zIndex:100,background:"#dc322f",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"Close Modal"}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:sampleCaptureResponse,isOpen,onClose:()=>setIsOpen(!1)})]})},parameters:{docs:{description:{story:"Click the close button to see the slide-down animation."}}}},__namedExportsOrder=["Default","TreeViewOpen","ComplexTask","SimpleTask","DecompositionInProgress","WithClarifications","InteractiveDemo","AllAtomicSteps","ManySteps","FastProcessing","SlowProcessing","Opening","Closing"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: sampleCaptureResponse,\n    isOpen: true,\n    onClose: () => console.log('Modal closed'),\n    onStartTask: () => console.log('Start task clicked'),\n    onViewAllTasks: () => console.log('View all tasks clicked')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Default modal state after successful task capture. Shows card view by default.'\n      }\n    }\n  }\n}",...Default.parameters?.docs?.source}}},TreeViewOpen.parameters={...TreeViewOpen.parameters,docs:{...TreeViewOpen.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: sampleCaptureResponse,\n    isOpen: true,\n    onClose: () => console.log('Modal closed'),\n    onStartTask: () => console.log('Start task clicked'),\n    onViewAllTasks: () => console.log('View all tasks clicked')\n  },\n  render: args => {\n    const [showTree, setShowTree] = React.useState(true);\n    return <>\n        <div style={{\n        position: 'fixed',\n        top: 20,\n        right: 20,\n        zIndex: 100,\n        background: '#073642',\n        padding: '12px',\n        borderRadius: '8px'\n      }}>\n          <button onClick={() => setShowTree(!showTree)} style={{\n          background: '#268bd2',\n          color: '#fff',\n          border: 'none',\n          padding: '8px 16px',\n          borderRadius: '6px',\n          cursor: 'pointer'\n        }}>\n            Toggle View\n          </button>\n        </div>\n        <TaskBreakdownModal {...args} />\n      </>;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Modal with tree view showing hierarchical task breakdown. Click nodes to expand/collapse.'\n      }\n    }\n  }\n}",...TreeViewOpen.parameters?.docs?.source}}},ComplexTask.parameters={...ComplexTask.parameters,docs:{...ComplexTask.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: complexCaptureResponse,\n    isOpen: true,\n    onClose: () => console.log('Modal closed'),\n    onStartTask: () => console.log('Start task clicked'),\n    onViewAllTasks: () => console.log('View all tasks clicked')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Complex task with multiple decomposable steps. Each step can be broken down further.'\n      }\n    }\n  }\n}",...ComplexTask.parameters?.docs?.source}}},SimpleTask.parameters={...SimpleTask.parameters,docs:{...SimpleTask.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: simpleTaskResponse,\n    isOpen: true,\n    onClose: () => console.log('Modal closed'),\n    onStartTask: () => console.log('Start task clicked'),\n    onViewAllTasks: () => console.log('View all tasks clicked')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Simple 2-step task - all atomic, nothing to decompose further.'\n      }\n    }\n  }\n}",...SimpleTask.parameters?.docs?.source}}},DecompositionInProgress.parameters={...DecompositionInProgress.parameters,docs:{...DecompositionInProgress.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const [isOpen, setIsOpen] = React.useState(true);\n    const [showDecomposition, setShowDecomposition] = React.useState(false);\n    React.useEffect(() => {\n      // Auto-trigger decomposition demo after 2 seconds\n      const timer = setTimeout(() => {\n        setShowDecomposition(true);\n      }, 2000);\n      return () => clearTimeout(timer);\n    }, []);\n    return <div>\n        {showDecomposition && <div style={{\n        position: 'fixed',\n        top: 20,\n        left: 20,\n        right: 20,\n        zIndex: 100,\n        background: '#268bd2',\n        padding: '16px',\n        borderRadius: '8px',\n        color: '#fff',\n        textAlign: 'center',\n        fontWeight: 'bold'\n      }}>\n            âš¡ Decomposition Demo: Watch the AsyncJobTimeline appear!\n          </div>}\n        <TaskBreakdownModal captureResponse={sampleCaptureResponse} isOpen={isOpen} onClose={() => setIsOpen(false)} onStartTask={() => console.log('Start task')} onViewAllTasks={() => console.log('View all')} />\n      </div>;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Shows the decomposition process with AsyncJobTimeline. Click \"ðŸ”¨ Decompose\" button on stub nodes.'\n      }\n    }\n  }\n}",...DecompositionInProgress.parameters?.docs?.source}}},WithClarifications.parameters={...WithClarifications.parameters,docs:{...WithClarifications.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: {\n      ...sampleCaptureResponse,\n      needs_clarification: true,\n      clarifications: [{\n        field: 'smart_plug_brand',\n        question: 'Which smart plug brand do you prefer?',\n        options: ['TP-Link', 'Wemo', 'Amazon Smart Plug']\n      }, {\n        field: 'geofence_radius',\n        question: 'What distance should trigger the automation?',\n        options: ['100m', '500m', '1km']\n      }]\n    },\n    isOpen: true,\n    onClose: () => console.log('Modal closed')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Task requires clarification - shows questions with option chips.'\n      }\n    }\n  }\n}",...WithClarifications.parameters?.docs?.source}}},InteractiveDemo.parameters={...InteractiveDemo.parameters,docs:{...InteractiveDemo.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const [isOpen, setIsOpen] = React.useState(true);\n    const [captureData, setCaptureData] = React.useState(sampleCaptureResponse);\n    const simulateDecomposition = (stepId: string) => {\n      console.log('ðŸ”¨ Decomposing step:', stepId);\n\n      // Simulate API response with new children after 3 seconds\n      setTimeout(() => {\n        const newChildren = [{\n          step_id: `${stepId}-child-1`,\n          description: 'Configure IFTTT account',\n          short_label: 'IFTTT setup',\n          estimated_minutes: 3,\n          total_minutes: 3,\n          leaf_type: 'HUMAN' as const,\n          icon: 'âš™ï¸',\n          is_leaf: true,\n          decomposition_state: 'atomic' as const,\n          level: 6,\n          tags: ['ðŸŽ¯ Focused']\n        }, {\n          step_id: `${stepId}-child-2`,\n          description: 'Create geofence boundary',\n          short_label: 'Set boundary',\n          estimated_minutes: 2,\n          total_minutes: 2,\n          leaf_type: 'HUMAN' as const,\n          icon: 'ðŸ“',\n          is_leaf: true,\n          decomposition_state: 'atomic' as const,\n          level: 6,\n          tags: ['âš¡ Quick Win']\n        }, {\n          step_id: `${stepId}-child-3`,\n          description: 'Link smart plug device',\n          short_label: 'Link device',\n          estimated_minutes: 2,\n          total_minutes: 2,\n          leaf_type: 'DIGITAL' as const,\n          icon: 'ðŸ”—',\n          is_leaf: true,\n          decomposition_state: 'atomic' as const,\n          level: 6,\n          tags: ['ðŸ¤– Auto']\n        }];\n        console.log('âœ… Decomposition complete! New steps:', newChildren);\n      }, 3000);\n    };\n    return <div>\n        <div style={{\n        position: 'fixed',\n        top: 20,\n        left: 20,\n        right: 20,\n        zIndex: 100,\n        background: '#073642',\n        padding: '12px 16px',\n        borderRadius: '8px',\n        border: '1px solid #586e75'\n      }}>\n          <p style={{\n          color: '#93a1a1',\n          fontSize: '12px',\n          margin: 0\n        }}>\n            ðŸ’¡ <strong>Tip:</strong> Switch to Tree View, then click \"ðŸ”¨ Decompose\" on the middle step (geofence setup)\n          </p>\n        </div>\n\n        <TaskBreakdownModal captureResponse={captureData} isOpen={isOpen} onClose={() => setIsOpen(false)} onStartTask={() => {\n        console.log('â–¶ï¸ Starting task...');\n        setIsOpen(false);\n      }} onViewAllTasks={() => {\n        console.log('ðŸ“‹ Viewing all tasks...');\n        setIsOpen(false);\n      }} />\n      </div>;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Fully interactive demo - try decomposing tasks and see the AsyncJobTimeline in action!'\n      }\n    }\n  }\n}",...InteractiveDemo.parameters?.docs?.source}}},AllAtomicSteps.parameters={...AllAtomicSteps.parameters,docs:{...AllAtomicSteps.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: {\n      ...simpleTaskResponse,\n      micro_steps: simpleTaskResponse.micro_steps.map(step => ({\n        ...step,\n        is_leaf: true,\n        decomposition_state: 'atomic' as const\n      }))\n    },\n    isOpen: true,\n    onClose: () => console.log('Modal closed')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'All steps are atomic - no decompose buttons should appear.'\n      }\n    }\n  }\n}",...AllAtomicSteps.parameters?.docs?.source}}},ManySteps.parameters={...ManySteps.parameters,docs:{...ManySteps.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: {\n      ...complexCaptureResponse,\n      micro_steps: Array.from({\n        length: 12\n      }, (_, i) => ({\n        step_id: `step-${i + 1}`,\n        description: `Task step number ${i + 1}`,\n        short_label: `Step ${i + 1}`,\n        estimated_minutes: Math.floor(Math.random() * 15) + 1,\n        total_minutes: Math.floor(Math.random() * 15) + 1,\n        leaf_type: (i % 2 === 0 ? 'HUMAN' : 'DIGITAL') as 'HUMAN' | 'DIGITAL',\n        icon: ['ðŸ“', 'ðŸ”§', 'ðŸŽ¨', 'ðŸ’¡', 'ðŸš€', 'âš™ï¸', 'ðŸ”', 'ðŸŽ¯'][i % 8],\n        is_leaf: i % 3 === 0,\n        decomposition_state: (i % 3 === 0 ? 'atomic' : 'stub') as 'atomic' | 'stub',\n        level: 5,\n        tags: []\n      })),\n      breakdown: {\n        total_steps: 12,\n        total_minutes: 120,\n        digital_count: 6,\n        human_count: 6\n      }\n    },\n    isOpen: true,\n    onClose: () => console.log('Modal closed')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Many steps (12) - tests scrolling and layout with large task lists.'\n      }\n    }\n  }\n}",...ManySteps.parameters?.docs?.source}}},FastProcessing.parameters={...FastProcessing.parameters,docs:{...FastProcessing.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: {\n      ...sampleCaptureResponse,\n      processing_time_ms: 234\n    },\n    isOpen: true,\n    onClose: () => console.log('Modal closed')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Very fast processing time (234ms) displayed.'\n      }\n    }\n  }\n}",...FastProcessing.parameters?.docs?.source}}},SlowProcessing.parameters={...SlowProcessing.parameters,docs:{...SlowProcessing.parameters?.docs,source:{originalSource:"{\n  args: {\n    captureResponse: {\n      ...complexCaptureResponse,\n      processing_time_ms: 45678\n    },\n    isOpen: true,\n    onClose: () => console.log('Modal closed')\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Slow processing time (45s) for complex task.'\n      }\n    }\n  }\n}",...SlowProcessing.parameters?.docs?.source}}},Opening.parameters={...Opening.parameters,docs:{...Opening.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const [isOpen, setIsOpen] = React.useState(false);\n    React.useEffect(() => {\n      // Trigger opening animation\n      const timer = setTimeout(() => setIsOpen(true), 500);\n      return () => clearTimeout(timer);\n    }, []);\n    return <TaskBreakdownModal captureResponse={sampleCaptureResponse} isOpen={isOpen} onClose={() => setIsOpen(false)} />;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Shows the slide-up opening animation.'\n      }\n    }\n  }\n}",...Opening.parameters?.docs?.source}}},Closing.parameters={...Closing.parameters,docs:{...Closing.parameters?.docs,source:{originalSource:"{\n  render: () => {\n    const [isOpen, setIsOpen] = React.useState(true);\n    return <div>\n        <button onClick={() => setIsOpen(false)} style={{\n        position: 'fixed',\n        top: 20,\n        right: 20,\n        zIndex: 100,\n        background: '#dc322f',\n        color: '#fff',\n        border: 'none',\n        padding: '12px 24px',\n        borderRadius: '8px',\n        cursor: 'pointer',\n        fontWeight: 'bold'\n      }}>\n          Close Modal\n        </button>\n        <TaskBreakdownModal captureResponse={sampleCaptureResponse} isOpen={isOpen} onClose={() => setIsOpen(false)} />\n      </div>;\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'Click the close button to see the slide-down animation.'\n      }\n    }\n  }\n}",...Closing.parameters?.docs?.source}}}},"./src/lib/design-system.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>fontSize,RK:()=>iconSize,Tj:()=>colors,Vq:()=>borderRadius,YK:()=>spacing,ZI:()=>semanticColors});const spacing={0:"0px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",24:"96px",28:"112px",32:"128px"},fontSize={xs:"12px",sm:"14px",base:"16px",lg:"18px",xl:"20px","2xl":"24px","3xl":"30px","4xl":"36px"},borderRadius={none:"0px",sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"20px","2xl":"24px","3xl":"32px",pill:"9999px",full:"9999px"},iconSize={xs:12,sm:16,base:20,lg:24,xl:28,"2xl":32},colors={base03:"#002b36",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900"},semanticColors={bg:{primary:colors.base03,secondary:colors.base02,tertiary:colors.base01},text:{primary:colors.base1,secondary:colors.base01,muted:colors.base01,inverse:colors.base03},border:{default:colors.base01,focus:colors.blue,accent:colors.cyan},accent:{primary:colors.cyan,secondary:colors.blue,success:colors.green,warning:colors.yellow,error:colors.red}}},"./src/services/taskApi.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TaskApiError:()=>TaskApiError,taskApi:()=>taskApi});class TaskApiError extends Error{constructor(message,status){super(message),this.status=status,this.name="TaskApiError"}}async function apiRequest(endpoint,options={}){const url=`http://192.168.1.26:8000${endpoint}`,response=await fetch(url,{headers:{"Content-Type":"application/json",...options.headers},...options});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new TaskApiError(errorData.detail||`HTTP ${response.status}: ${response.statusText}`,response.status)}return response.json()}const taskApi={createTask:async taskData=>apiRequest("/api/v1/tasks",{method:"POST",body:JSON.stringify(taskData)}),getTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}`),updateTask:async(taskId,updates)=>apiRequest(`/api/v1/tasks/${taskId}`,{method:"PUT",body:JSON.stringify(updates)}),async deleteTask(taskId){await apiRequest(`/api/v1/tasks/${taskId}`,{method:"DELETE"})},async listTasks(params={}){const searchParams=new URLSearchParams;return Object.entries(params).forEach(([key,value])=>{void 0!==value&&(Array.isArray(value)?value.forEach(item=>searchParams.append(key,item)):searchParams.append(key,String(value)))}),apiRequest(`/api/v1/tasks?${searchParams.toString()}`)},createProject:async projectData=>apiRequest("/api/v1/projects",{method:"POST",body:JSON.stringify(projectData)}),getProject:async projectId=>apiRequest(`/api/v1/projects/${projectId}`),listProjects:async()=>apiRequest("/api/v1/projects"),getTaskHierarchy:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/hierarchy`),bulkUpdateTasks:async(taskIds,updates)=>apiRequest("/api/v1/tasks/bulk",{method:"PATCH",body:JSON.stringify({task_ids:taskIds,updates})}),estimateTaskDuration:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/estimate`,{method:"POST"}),breakDownTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/breakdown`,{method:"POST"}),createTaskFromTemplate:async(templateName,projectId,variables)=>apiRequest("/api/v1/tasks/from-template",{method:"POST",body:JSON.stringify({template_name:templateName,project_id:projectId,variables})}),quickCapture:async request=>apiRequest("/api/v1/mobile/quick-capture",{method:"POST",body:JSON.stringify(request)}),getMobileDashboard:async userId=>apiRequest(`/api/v1/mobile/dashboard/${userId}`),getMobileOptimizedTasks:async(userId,limit=20)=>apiRequest(`/api/v1/mobile/tasks/${userId}?limit=${limit}`),processVoiceInput:async(audioText,userId)=>apiRequest("/api/v1/mobile/voice-process",{method:"POST",body:JSON.stringify({audio_text:audioText,user_id:userId})}),getProjectAnalytics:async projectId=>apiRequest(`/api/v1/projects/${projectId}/analytics`),smartPrioritizeTasks:async projectId=>apiRequest(`/api/v1/projects/${projectId}/prioritize`,{method:"POST"})}}}]);