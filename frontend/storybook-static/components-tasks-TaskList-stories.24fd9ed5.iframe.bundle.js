"use strict";(self.webpackChunkproxy_agent_platform_frontend=self.webpackChunkproxy_agent_platform_frontend||[]).push([[16],{"./src/components/tasks/TaskList.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,EmptyState:()=>EmptyState,FilteredByStatus:()=>FilteredByStatus,Loading:()=>Loading,SortedByPriority:()=>SortedByPriority,WithCustomClass:()=>WithCustomClass,WithError:()=>WithError,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TaskList_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),LayoutGroupContext=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs"),use_constant=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/utils/use-constant.mjs"),use_isomorphic_effect=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs"),PresenceContext=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/context/PresenceContext.mjs"),is_html_element=__webpack_require__("./node_modules/.pnpm/motion-dom@12.23.23/node_modules/motion-dom/dist/es/utils/is-html-element.mjs"),MotionConfigContext=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs");function setRef(ref,value){if("function"==typeof ref)return ref(value);null!=ref&&(ref.current=value)}function useComposedRefs(...refs){return react.useCallback(function composeRefs(...refs){return node=>{let hasCleanup=!1;const cleanups=refs.map(ref=>{const cleanup=setRef(ref,node);return hasCleanup||"function"!=typeof cleanup||(hasCleanup=!0),cleanup});if(hasCleanup)return()=>{for(let i=0;i<cleanups.length;i++){const cleanup=cleanups[i];"function"==typeof cleanup?cleanup():setRef(refs[i],null)}}}}(...refs),refs)}class PopChildMeasure extends react.Component{getSnapshotBeforeUpdate(prevProps){const element=this.props.childRef.current;if(element&&prevProps.isPresent&&!this.props.isPresent){const parent=element.offsetParent,parentWidth=(0,is_html_element.s)(parent)&&parent.offsetWidth||0,size=this.props.sizeRef.current;size.height=element.offsetHeight||0,size.width=element.offsetWidth||0,size.top=element.offsetTop,size.left=element.offsetLeft,size.right=parentWidth-size.width-size.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children,isPresent,anchorX,root}){const id=(0,react.useId)(),ref=(0,react.useRef)(null),size=(0,react.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce}=(0,react.useContext)(MotionConfigContext.Q),composedRef=useComposedRefs(ref,children?.ref);return(0,react.useInsertionEffect)(()=>{const{width,height,top,left,right}=size.current;if(isPresent||!ref.current||!width||!height)return;const x="left"===anchorX?`left: ${left}`:`right: ${right}`;ref.current.dataset.motionPopId=id;const style=document.createElement("style");nonce&&(style.nonce=nonce);const parent=root??document.head;return parent.appendChild(style),style.sheet&&style.sheet.insertRule(`\n          [data-motion-pop-id="${id}"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            top: ${top}px !important;\n          }\n        `),()=>{parent.contains(style)&&parent.removeChild(style)}},[isPresent]),(0,jsx_runtime.jsx)(PopChildMeasure,{isPresent,childRef:ref,sizeRef:size,children:react.cloneElement(children,{ref:composedRef})})}const PresenceChild=({children,initial,isPresent,onExitComplete,custom,presenceAffectsLayout,mode,anchorX,root})=>{const presenceChildren=(0,use_constant.M)(newChildrenMap),id=(0,react.useId)();let isReusedContext=!0,context=(0,react.useMemo)(()=>(isReusedContext=!1,{id,initial,isPresent,custom,onExitComplete:childId=>{presenceChildren.set(childId,!0);for(const isComplete of presenceChildren.values())if(!isComplete)return;onExitComplete&&onExitComplete()},register:childId=>(presenceChildren.set(childId,!1),()=>presenceChildren.delete(childId))}),[isPresent,presenceChildren,onExitComplete]);return presenceAffectsLayout&&isReusedContext&&(context={...context}),(0,react.useMemo)(()=>{presenceChildren.forEach((_,key)=>presenceChildren.set(key,!1))},[isPresent]),react.useEffect(()=>{!isPresent&&!presenceChildren.size&&onExitComplete&&onExitComplete()},[isPresent]),"popLayout"===mode&&(children=(0,jsx_runtime.jsx)(PopChild,{isPresent,anchorX,root,children})),(0,jsx_runtime.jsx)(PresenceContext.t.Provider,{value:context,children})};function newChildrenMap(){return new Map}var use_presence=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs");const getChildKey=child=>child.key||"";function onlyElements(children){const filtered=[];return react.Children.forEach(children,child=>{(0,react.isValidElement)(child)&&filtered.push(child)}),filtered}const AnimatePresence=({children,custom,initial=!0,onExitComplete,presenceAffectsLayout=!0,mode="sync",propagate=!1,anchorX="left",root})=>{const[isParentPresent,safeToRemove]=(0,use_presence.xQ)(propagate),presentChildren=(0,react.useMemo)(()=>onlyElements(children),[children]),presentKeys=propagate&&!isParentPresent?[]:presentChildren.map(getChildKey),isInitialRender=(0,react.useRef)(!0),pendingPresentChildren=(0,react.useRef)(presentChildren),exitComplete=(0,use_constant.M)(()=>new Map),[diffedChildren,setDiffedChildren]=(0,react.useState)(presentChildren),[renderedChildren,setRenderedChildren]=(0,react.useState)(presentChildren);(0,use_isomorphic_effect.E)(()=>{isInitialRender.current=!1,pendingPresentChildren.current=presentChildren;for(let i=0;i<renderedChildren.length;i++){const key=getChildKey(renderedChildren[i]);presentKeys.includes(key)?exitComplete.delete(key):!0!==exitComplete.get(key)&&exitComplete.set(key,!1)}},[renderedChildren,presentKeys.length,presentKeys.join("-")]);const exitingChildren=[];if(presentChildren!==diffedChildren){let nextChildren=[...presentChildren];for(let i=0;i<renderedChildren.length;i++){const child=renderedChildren[i],key=getChildKey(child);presentKeys.includes(key)||(nextChildren.splice(i,0,child),exitingChildren.push(child))}return"wait"===mode&&exitingChildren.length&&(nextChildren=exitingChildren),setRenderedChildren(onlyElements(nextChildren)),setDiffedChildren(presentChildren),null}const{forceRender}=(0,react.useContext)(LayoutGroupContext.L);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:renderedChildren.map(child=>{const key=getChildKey(child),isPresent=!(propagate&&!isParentPresent)&&(presentChildren===renderedChildren||presentKeys.includes(key));return(0,jsx_runtime.jsx)(PresenceChild,{isPresent,initial:!(isInitialRender.current&&!initial)&&void 0,custom,presenceAffectsLayout,mode,root,onExitComplete:isPresent?void 0:()=>{if(!exitComplete.has(key))return;exitComplete.set(key,!0);let isEveryExitComplete=!0;exitComplete.forEach(isExitComplete=>{isExitComplete||(isEveryExitComplete=!1)}),isEveryExitComplete&&(forceRender?.(),setRenderedChildren(pendingPresentChildren.current),propagate&&safeToRemove?.(),onExitComplete&&onExitComplete())},anchorX,children:child},key)})})};var proxy=__webpack_require__("./node_modules/.pnpm/framer-motion@12.23.24_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),createLucideIcon=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js");const Circle=(0,createLucideIcon.A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var clock=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/clock.js");const AlertCircle=(0,createLucideIcon.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),CheckCircle2=(0,createLucideIcon.A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),RefreshCw=(0,createLucideIcon.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Filter=(0,createLucideIcon.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ChevronDown=(0,createLucideIcon.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ArrowUpDown=(0,createLucideIcon.A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),MoreVertical=(0,createLucideIcon.A)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),PenSquare=(0,createLucideIcon.A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Trash2=(0,createLucideIcon.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var taskApi=__webpack_require__("./src/services/taskApi.ts"),TaskStatus=function(TaskStatus){return TaskStatus.TODO="todo",TaskStatus.IN_PROGRESS="in_progress",TaskStatus.BLOCKED="blocked",TaskStatus.REVIEW="review",TaskStatus.COMPLETED="completed",TaskStatus.CANCELLED="cancelled",TaskStatus}({}),TaskPriority=function(TaskPriority){return TaskPriority.LOW="low",TaskPriority.MEDIUM="medium",TaskPriority.HIGH="high",TaskPriority.CRITICAL="critical",TaskPriority}({}),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const statusColors={[TaskStatus.TODO]:"bg-gray-100 text-gray-700",[TaskStatus.IN_PROGRESS]:"bg-blue-100 text-blue-700",[TaskStatus.BLOCKED]:"bg-red-100 text-red-700",[TaskStatus.REVIEW]:"bg-yellow-100 text-yellow-700",[TaskStatus.COMPLETED]:"bg-green-100 text-green-700",[TaskStatus.CANCELLED]:"bg-gray-100 text-gray-500"},priorityColors={[TaskPriority.LOW]:"bg-gray-100 text-gray-600",[TaskPriority.MEDIUM]:"bg-blue-100 text-blue-600",[TaskPriority.HIGH]:"bg-orange-100 text-orange-600",[TaskPriority.CRITICAL]:"bg-red-100 text-red-600"},statusIcons={[TaskStatus.TODO]:Circle,[TaskStatus.IN_PROGRESS]:clock.A,[TaskStatus.BLOCKED]:AlertCircle,[TaskStatus.REVIEW]:clock.A,[TaskStatus.COMPLETED]:CheckCircle2,[TaskStatus.CANCELLED]:Circle};function TaskList({projectId,onTaskSelect,onTaskUpdate,className=""}){var _filter_status,_filter_priority;const[tasks,setTasks]=(0,react.useState)([]),[loading,setLoading]=(0,react.useState)(!0),[error,setError]=(0,react.useState)(null),[filter,setFilter]=(0,react.useState)({sortBy:"created_at",sortOrder:"desc"}),[showFilters,setShowFilters]=(0,react.useState)(!1),[showSortMenu,setShowSortMenu]=(0,react.useState)(!1),[activeTaskMenu,setActiveTaskMenu]=(0,react.useState)(null),[deletingTask,setDeletingTask]=(0,react.useState)(null),[isMobile,setIsMobile]=(0,react.useState)(!1);(0,react.useEffect)(()=>{const checkMobile=()=>setIsMobile(window.innerWidth<768);return checkMobile(),window.addEventListener("resize",checkMobile),()=>window.removeEventListener("resize",checkMobile)},[]);const loadTasks=async()=>{try{setLoading(!0),setError(null);const params={project_id:projectId,...filter.status&&{status:filter.status},...filter.priority&&{priority:filter.priority},limit:20,offset:0,sort_by:filter.sortBy,sort_order:filter.sortOrder},response=await taskApi.taskApi.listTasks(params);setTasks(response.tasks)}catch(err){setError(err instanceof taskApi.TaskApiError?err.message:"Failed to load tasks")}finally{setLoading(!1)}};(0,react.useEffect)(()=>{loadTasks()},[projectId,filter]);const handleStatusFilter=status=>{setFilter(prev=>({...prev,status}))},handlePriorityFilter=priority=>{setFilter(prev=>({...prev,priority})),setShowFilters(!1)},handleSort=sortBy=>{setFilter(prev=>({...prev,sortBy,sortOrder:prev.sortBy===sortBy&&"desc"===prev.sortOrder?"asc":"desc"})),setShowSortMenu(!1)};if(loading)return(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,jsx_runtime.jsx)(RefreshCw,{className:"w-6 h-6 animate-spin text-blue-600"}),(0,jsx_runtime.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading tasks..."})]});if(error)return(0,jsx_runtime.jsxs)("div",{className:"text-center py-12",children:[(0,jsx_runtime.jsx)("p",{className:"text-red-600 mb-4",children:error}),(0,jsx_runtime.jsx)("button",{onClick:loadTasks,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]});const filteredMessage=filter.status||filter.priority?`No ${(null===(_filter_status=filter.status)||void 0===_filter_status?void 0:_filter_status.toLowerCase())||(null===(_filter_priority=filter.priority)||void 0===_filter_priority?void 0:_filter_priority.toLowerCase())} tasks found`:"No tasks found";return(0,jsx_runtime.jsxs)("div",{className:`space-y-6 ${className}`,"data-testid":isMobile?"task-list-mobile":"task-list-desktop",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,jsx_runtime.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Tasks"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>handleStatusFilter(void 0),className:"px-3 py-1 text-sm rounded-full transition-colors "+(filter.status?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-600 text-white"),children:"All"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleStatusFilter(TaskStatus.TODO),className:"px-3 py-1 text-sm rounded-full transition-colors "+(filter.status===TaskStatus.TODO?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Todo"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleStatusFilter(TaskStatus.IN_PROGRESS),className:"px-3 py-1 text-sm rounded-full transition-colors "+(filter.status===TaskStatus.IN_PROGRESS?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"In Progress"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleStatusFilter(TaskStatus.COMPLETED),className:"px-3 py-1 text-sm rounded-full transition-colors "+(filter.status===TaskStatus.COMPLETED?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Completed"})]}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsxs)("button",{onClick:()=>setShowFilters(!showFilters),className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:[(0,jsx_runtime.jsx)(Filter,{className:"w-4 h-4"}),(0,jsx_runtime.jsx)("span",{children:"Priority"}),(0,jsx_runtime.jsx)(ChevronDown,{className:"w-3 h-3"})]}),showFilters&&(0,jsx_runtime.jsxs)("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>handlePriorityFilter(void 0),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"All"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handlePriorityFilter(TaskPriority.HIGH),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"High"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handlePriorityFilter(TaskPriority.MEDIUM),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"Medium"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handlePriorityFilter(TaskPriority.LOW),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"Low"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsxs)("button",{onClick:()=>setShowSortMenu(!showSortMenu),className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:[(0,jsx_runtime.jsx)(ArrowUpDown,{className:"w-4 h-4"}),(0,jsx_runtime.jsx)("span",{children:"Sort"}),(0,jsx_runtime.jsx)(ChevronDown,{className:"w-3 h-3"})]}),(0,jsx_runtime.jsx)(AnimatePresence,{children:showSortMenu&&(0,jsx_runtime.jsxs)(proxy.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>handleSort("created_at"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"Created Date"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleSort("priority"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"Priority"}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleSort("title"),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:"Title"})]})})]})]})]}),0===tasks.length?(0,jsx_runtime.jsxs)("div",{className:"text-center py-12",children:[(0,jsx_runtime.jsx)(Circle,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,jsx_runtime.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:filter.status||filter.priority?filteredMessage:"No tasks found"}),(0,jsx_runtime.jsx)("p",{className:"text-gray-600",children:filter.status||filter.priority?"Try adjusting your filters to see more tasks.":"Create your first task to get started."})]}):(0,jsx_runtime.jsx)("div",{className:"space-y-3",children:(0,jsx_runtime.jsx)(AnimatePresence,{children:tasks.map(task=>{const StatusIcon=statusIcons[task.status];return(0,jsx_runtime.jsx)(proxy.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:"glass-card rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>(task=>{onTaskSelect(task)})(task),children:(0,jsx_runtime.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,jsx_runtime.jsx)("button",{onClick:e=>{e.stopPropagation(),(async task=>{try{const newStatus=task.status===TaskStatus.COMPLETED?TaskStatus.TODO:TaskStatus.COMPLETED,updatedTask=await taskApi.taskApi.updateTask(task.task_id,{status:newStatus});setTasks(prev=>prev.map(t=>t.task_id===task.task_id?updatedTask:t)),onTaskUpdate(updatedTask)}catch(err){console.error("Failed to update task status:",err)}})(task)},className:"mt-1 text-gray-400 hover:text-blue-600 transition-colors",children:(0,jsx_runtime.jsx)(StatusIcon,{className:"w-5 h-5"})}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:task.title}),task.description&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:task.description})]}),(0,jsx_runtime.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("button",{onClick:e=>{e.stopPropagation(),setActiveTaskMenu(activeTaskMenu===task.task_id?null:task.task_id)},className:"p-1 text-gray-400 hover:text-gray-600 rounded","aria-label":"More actions",children:(0,jsx_runtime.jsx)(MoreVertical,{className:"w-4 h-4"})}),(0,jsx_runtime.jsx)(AnimatePresence,{children:activeTaskMenu===task.task_id&&(0,jsx_runtime.jsxs)(proxy.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 mt-1 w-32 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[(0,jsx_runtime.jsxs)("button",{onClick:e=>{e.stopPropagation(),setActiveTaskMenu(null)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[(0,jsx_runtime.jsx)(PenSquare,{className:"w-3 h-3"}),(0,jsx_runtime.jsx)("span",{children:"Edit"})]}),(0,jsx_runtime.jsxs)("button",{onClick:e=>{e.stopPropagation(),confirm("Are you sure you want to delete this task?")&&(async taskId=>{try{setDeletingTask(taskId),await taskApi.taskApi.deleteTask(taskId),setTasks(prev=>prev.filter(t=>t.task_id!==taskId)),setActiveTaskMenu(null)}catch(err){console.error("Failed to delete task:",err)}finally{setDeletingTask(null)}})(task.task_id)},disabled:deletingTask===task.task_id,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 text-red-600 flex items-center space-x-2 disabled:opacity-50",children:[(0,jsx_runtime.jsx)(Trash2,{className:"w-3 h-3"}),(0,jsx_runtime.jsx)("span",{children:"Delete"})]})]})})]})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,jsx_runtime.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${priorityColors[task.priority]}`,children:task.priority.toUpperCase()}),(0,jsx_runtime.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${statusColors[task.status]}`,children:task.status.replace("_"," ").toUpperCase()}),task.subtask_count>0&&(0,jsx_runtime.jsxs)("span",{className:"text-xs text-gray-500",children:[task.subtask_count," subtask",task.subtask_count>1?"s":""]})]}),task.progress_percentage>0&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,jsx_runtime.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,jsx_runtime.jsx)("div",{className:"h-full transition-all duration-300 "+(percentage=task.progress_percentage,100===percentage?"bg-green-500":percentage>=75?"bg-blue-500":percentage>=50?"bg-yellow-500":percentage>=25?"bg-orange-500":"bg-gray-300"),style:{width:`${task.progress_percentage}%`}})}),(0,jsx_runtime.jsxs)("span",{className:"text-xs text-gray-600",children:[task.progress_percentage,"%"]})]})]})]})]})},task.task_id);var percentage})})})]})}try{TaskList.displayName="TaskList",TaskList.__docgenInfo={description:"",displayName:"TaskList",props:{projectId:{defaultValue:null,description:"",name:"projectId",required:!0,type:{name:"string"}},onTaskSelect:{defaultValue:null,description:"",name:"onTaskSelect",required:!0,type:{name:"(task: Task) => void"}},onTaskUpdate:{defaultValue:null,description:"",name:"onTaskUpdate",required:!0,type:{name:"(task: Task) => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tasks/TaskList.tsx#TaskList"]={docgenInfo:TaskList.__docgenInfo,name:"TaskList",path:"src/components/tasks/TaskList.tsx#TaskList"})}catch(__react_docgen_typescript_loader_error){}var TaskList_stories_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");jest.mock("@/services/taskApi",()=>({taskApi:{getTasks:jest.fn().mockResolvedValue({tasks:[{id:"1",title:"Complete project documentation",description:"Write comprehensive documentation for the project",status:TaskStatus.IN_PROGRESS,priority:TaskPriority.HIGH,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),user_id:"user-1",tags:["documentation","project"],due_date:new Date(Date.now()+6048e5).toISOString(),completed_at:null},{id:"2",title:"Review code changes",description:"Review the latest pull requests",status:TaskStatus.TODO,priority:TaskPriority.MEDIUM,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),user_id:"user-1",tags:["code-review"],due_date:null,completed_at:null},{id:"3",title:"Fix critical bug",description:"Fix the authentication bug in production",status:TaskStatus.BLOCKED,priority:TaskPriority.CRITICAL,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),user_id:"user-1",tags:["bug","critical"],due_date:new Date(Date.now()+1728e5).toISOString(),completed_at:null}],total:3,page:1,limit:10}),updateTask:jest.fn().mockResolvedValue({}),deleteTask:jest.fn().mockResolvedValue({})},TaskApiError:class extends Error{constructor(message){super(message),this.name="TaskApiError"}}}));const TaskList_stories={title:"Components/TaskList",component:TaskList,parameters:{layout:"padded",docs:{description:{component:"A comprehensive task list component with filtering, sorting, and task management capabilities."}}},argTypes:{projectId:{control:"text",description:"The project ID to load tasks for"},onTaskSelect:{action:"taskSelected",description:"Callback when a task is selected"},onTaskUpdate:{action:"taskUpdated",description:"Callback when a task is updated"},className:{control:"text",description:"Additional CSS classes"}},args:{projectId:"project-123",onTaskSelect:task=>TaskList_stories_console.log("Task selected:",task),onTaskUpdate:task=>TaskList_stories_console.log("Task updated:",task)}},Default={args:{projectId:"project-123"}},WithCustomClass={args:{projectId:"project-123",className:"max-w-4xl"}},EmptyState={args:{projectId:"project-123"},parameters:{docs:{description:{story:"The component when no tasks are available."}}},play:async()=>{const{taskApi}=__webpack_require__("./src/services/taskApi.ts");taskApi.getTasks.mockResolvedValueOnce({tasks:[],total:0,page:1,limit:10})}},Loading={args:{projectId:"project-123"},parameters:{docs:{description:{story:"The component in a loading state."}}},play:async()=>{const{taskApi}=__webpack_require__("./src/services/taskApi.ts");taskApi.getTasks.mockImplementationOnce(()=>new Promise(resolve=>setTimeout(resolve,2e3)))}},WithError={args:{projectId:"project-123"},parameters:{docs:{description:{story:"The component showing an error state."}}},play:async()=>{const{taskApi}=__webpack_require__("./src/services/taskApi.ts");taskApi.getTasks.mockRejectedValueOnce(new Error("Failed to load tasks"))}},FilteredByStatus={args:{projectId:"project-123"},parameters:{docs:{description:{story:"The component with tasks filtered by status."}}},play:async({canvasElement})=>{const filterButton=canvasElement.querySelector('[data-testid="filter-button"]');filterButton&&(filterButton.click(),setTimeout(()=>{const statusFilter=canvasElement.querySelector('[data-testid="status-filter"]');statusFilter&&statusFilter.click()},100))}},SortedByPriority={args:{projectId:"project-123"},parameters:{docs:{description:{story:"The component with tasks sorted by priority."}}},play:async({canvasElement})=>{const sortButton=canvasElement.querySelector('[data-testid="sort-button"]');sortButton&&(sortButton.click(),setTimeout(()=>{const prioritySort=canvasElement.querySelector('[data-testid="priority-sort"]');prioritySort&&prioritySort.click()},100))}},__namedExportsOrder=["Default","WithCustomClass","EmptyState","Loading","WithError","FilteredByStatus","SortedByPriority"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123'\n  }\n}",...Default.parameters?.docs?.source}}},WithCustomClass.parameters={...WithCustomClass.parameters,docs:{...WithCustomClass.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123',\n    className: 'max-w-4xl'\n  }\n}",...WithCustomClass.parameters?.docs?.source}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component when no tasks are available.'\n      }\n    }\n  },\n  play: async () => {\n    // Mock empty response\n    const {\n      taskApi\n    } = require('@/services/taskApi');\n    taskApi.getTasks.mockResolvedValueOnce({\n      tasks: [],\n      total: 0,\n      page: 1,\n      limit: 10\n    });\n  }\n}",...EmptyState.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component in a loading state.'\n      }\n    }\n  },\n  play: async () => {\n    // Mock loading state by delaying the response\n    const {\n      taskApi\n    } = require('@/services/taskApi');\n    taskApi.getTasks.mockImplementationOnce(() => new Promise(resolve => setTimeout(resolve, 2000)));\n  }\n}",...Loading.parameters?.docs?.source}}},WithError.parameters={...WithError.parameters,docs:{...WithError.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component showing an error state.'\n      }\n    }\n  },\n  play: async () => {\n    // Mock an error\n    const {\n      taskApi\n    } = require('@/services/taskApi');\n    taskApi.getTasks.mockRejectedValueOnce(new Error('Failed to load tasks'));\n  }\n}",...WithError.parameters?.docs?.source}}},FilteredByStatus.parameters={...FilteredByStatus.parameters,docs:{...FilteredByStatus.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component with tasks filtered by status.'\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    // Simulate filtering by status\n    const filterButton = canvasElement.querySelector('[data-testid=\"filter-button\"]');\n    if (filterButton) {\n      filterButton.click();\n\n      // Wait for filter dropdown to appear and select a status\n      setTimeout(() => {\n        const statusFilter = canvasElement.querySelector('[data-testid=\"status-filter\"]');\n        if (statusFilter) {\n          statusFilter.click();\n        }\n      }, 100);\n    }\n  }\n}",...FilteredByStatus.parameters?.docs?.source}}},SortedByPriority.parameters={...SortedByPriority.parameters,docs:{...SortedByPriority.parameters?.docs,source:{originalSource:"{\n  args: {\n    projectId: 'project-123'\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: 'The component with tasks sorted by priority.'\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    // Simulate sorting by priority\n    const sortButton = canvasElement.querySelector('[data-testid=\"sort-button\"]');\n    if (sortButton) {\n      sortButton.click();\n\n      // Wait for sort dropdown to appear and select priority\n      setTimeout(() => {\n        const prioritySort = canvasElement.querySelector('[data-testid=\"priority-sort\"]');\n        if (prioritySort) {\n          prioritySort.click();\n        }\n      }, 100);\n    }\n  }\n}",...SortedByPriority.parameters?.docs?.source}}}},"./src/services/taskApi.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TaskApiError:()=>TaskApiError,taskApi:()=>taskApi});class TaskApiError extends Error{constructor(message,status){super(message),this.status=status,this.name="TaskApiError"}}async function apiRequest(endpoint,options={}){const url=`http://192.168.1.26:8000${endpoint}`,response=await fetch(url,{headers:{"Content-Type":"application/json",...options.headers},...options});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new TaskApiError(errorData.detail||`HTTP ${response.status}: ${response.statusText}`,response.status)}return response.json()}const taskApi={createTask:async taskData=>apiRequest("/api/v1/tasks",{method:"POST",body:JSON.stringify(taskData)}),getTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}`),updateTask:async(taskId,updates)=>apiRequest(`/api/v1/tasks/${taskId}`,{method:"PUT",body:JSON.stringify(updates)}),async deleteTask(taskId){await apiRequest(`/api/v1/tasks/${taskId}`,{method:"DELETE"})},async listTasks(params={}){const searchParams=new URLSearchParams;return Object.entries(params).forEach(([key,value])=>{void 0!==value&&(Array.isArray(value)?value.forEach(item=>searchParams.append(key,item)):searchParams.append(key,String(value)))}),apiRequest(`/api/v1/tasks?${searchParams.toString()}`)},createProject:async projectData=>apiRequest("/api/v1/projects",{method:"POST",body:JSON.stringify(projectData)}),getProject:async projectId=>apiRequest(`/api/v1/projects/${projectId}`),listProjects:async()=>apiRequest("/api/v1/projects"),getTaskHierarchy:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/hierarchy`),bulkUpdateTasks:async(taskIds,updates)=>apiRequest("/api/v1/tasks/bulk",{method:"PATCH",body:JSON.stringify({task_ids:taskIds,updates})}),estimateTaskDuration:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/estimate`,{method:"POST"}),breakDownTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/breakdown`,{method:"POST"}),createTaskFromTemplate:async(templateName,projectId,variables)=>apiRequest("/api/v1/tasks/from-template",{method:"POST",body:JSON.stringify({template_name:templateName,project_id:projectId,variables})}),quickCapture:async request=>apiRequest("/api/v1/mobile/quick-capture",{method:"POST",body:JSON.stringify(request)}),getMobileDashboard:async userId=>apiRequest(`/api/v1/mobile/dashboard/${userId}`),getMobileOptimizedTasks:async(userId,limit=20)=>apiRequest(`/api/v1/mobile/tasks/${userId}?limit=${limit}`),processVoiceInput:async(audioText,userId)=>apiRequest("/api/v1/mobile/voice-process",{method:"POST",body:JSON.stringify({audio_text:audioText,user_id:userId})}),getProjectAnalytics:async projectId=>apiRequest(`/api/v1/projects/${projectId}/analytics`),smartPrioritizeTasks:async projectId=>apiRequest(`/api/v1/projects/${projectId}/prioritize`,{method:"POST"})}}}]);