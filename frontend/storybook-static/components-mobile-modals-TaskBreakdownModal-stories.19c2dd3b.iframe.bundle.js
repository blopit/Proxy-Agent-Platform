"use strict";(self.webpackChunkproxy_agent_platform_frontend=self.webpackChunkproxy_agent_platform_frontend||[]).push([[6701],{"./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/check-circle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CheckCircle});const CheckCircle=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},"./src/components/mobile/modals/TaskBreakdownModal.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CardView__Basic:()=>CardView__Basic,CardView__Simple:()=>CardView__Simple,ChevronView__Basic:()=>ChevronView__Basic,ChevronView__Complex:()=>ChevronView__Complex,ChevronView__Interactive:()=>ChevronView__Interactive,ChevronView__ManySteps:()=>ChevronView__ManySteps,Default:()=>Default,EdgeCases__AllAtomic:()=>EdgeCases__AllAtomic,Features__Clarifications:()=>Features__Clarifications,Features__LiveDecomposition:()=>Features__LiveDecomposition,Features__ProcessingSpeed:()=>Features__ProcessingSpeed,States__Closing:()=>States__Closing,States__Opening:()=>States__Opening,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TaskBreakdownModal_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.5.6_@babel+core@7.28.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),check_circle=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/check-circle.js"),x=__webpack_require__("./node_modules/.pnpm/lucide-react@0.292.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/x.js"),TaskCardBig=__webpack_require__("./src/components/mobile/cards/TaskCardBig.tsx"),AsyncJobTimeline=__webpack_require__("./src/components/shared/AsyncJobTimeline.tsx");__webpack_require__("./src/services/taskApi.ts");var console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function TaskBreakdownModal({captureResponse,isOpen,onClose,onStartTask,onViewAllTasks}){const[showContent,setShowContent]=(0,react.useState)(!1),[showCelebration,setShowCelebration]=(0,react.useState)(!1),[expandedNodes,setExpandedNodes]=(0,react.useState)(new Set),[showHierarchyView,setShowHierarchyView]=(0,react.useState)(!1),[decomposingNodeId,setDecomposingNodeId]=(0,react.useState)(null),[decompositionSteps,setDecompositionSteps]=(0,react.useState)([]),[decompositionProgress,setDecompositionProgress]=(0,react.useState)(0),[hierarchyTree,setHierarchyTree]=(0,react.useState)(null);if((0,react.useEffect)(()=>{isOpen&&captureResponse?(setShowCelebration(!0),setTimeout(()=>setShowCelebration(!1),1500),setTimeout(()=>setShowContent(!0),100),setHierarchyTree(convertToHierarchyTree())):(setShowContent(!1),setHierarchyTree(null))},[isOpen,captureResponse]),!isOpen||!captureResponse)return null;const taskCardProps=function captureResponseToCardProps(response){const{task,micro_steps,breakdown}=response,is_digital=breakdown.digital_count>breakdown.human_count,subtask_progress={completed:0,total:micro_steps.length,percentage:0},estimated_minutes=task.estimated_hours?Math.round(60*task.estimated_hours):breakdown.total_minutes;return{title:task.title,description:task.description,status:"pending",priority:task.priority.toLowerCase(),estimated_hours:task.estimated_hours,estimated_minutes,tags:task.tags,is_digital,micro_steps,breakdown,progress:0,subtask_progress,has_dependencies:!1,created_at:(new Date).toISOString()}}(captureResponse),convertToHierarchyTree=()=>{if(!captureResponse)return null;return{task_id:"root",title:captureResponse.task.title,description:captureResponse.task.description,level:0,children_ids:captureResponse.micro_steps.map(s=>s.step_id),children:captureResponse.micro_steps.map((step,index)=>{var _step_is_leaf;return{task_id:step.step_id,title:step.description,level:step.level||6,parent_id:"root",children_ids:[],estimated_minutes:step.estimated_minutes,total_minutes:step.total_minutes||step.estimated_minutes,decomposition_state:step.decomposition_state||"atomic",is_leaf:null===(_step_is_leaf=step.is_leaf)||void 0===_step_is_leaf||_step_is_leaf,leaf_type:step.leaf_type,icon:step.icon,custom_emoji:step.custom_emoji,delegation_mode:step.delegation_mode,step_number:index+1}}),estimated_minutes:Math.round(60*(captureResponse.task.estimated_hours||0)),total_minutes:captureResponse.breakdown.total_minutes,decomposition_state:"decomposed",is_leaf:!1,priority:captureResponse.task.priority,tags:captureResponse.task.tags}},handleStartTask=()=>{null==onStartTask||onStartTask(),onClose()},handleViewAll=()=>{null==onViewAllTasks||onViewAllTasks(),onClose()};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 bg-black/60 z-40 transition-opacity duration-300 "+(isOpen?"opacity-100":"opacity-0 pointer-events-none"),onClick:onClose}),(0,jsx_runtime.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-50 transition-transform duration-300 ease-out "+(showContent?"translate-y-0":"translate-y-full"),children:(0,jsx_runtime.jsxs)("div",{className:"bg-[#002b36] rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-[#586e75]",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(check_circle.A,{size:20,className:"text-[#859900]"}),(0,jsx_runtime.jsx)("h2",{className:"text-lg font-bold text-[#93a1a1]",children:"Task Captured Successfully!"})]}),(0,jsx_runtime.jsx)("button",{onClick:onClose,className:"p-1 hover:bg-[#073642] rounded-lg transition-colors","aria-label":"Close",children:(0,jsx_runtime.jsx)(x.A,{size:20,className:"text-[#93a1a1]"})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4 p-3 bg-[#859900]/10 border border-[#859900] rounded-lg",children:(0,jsx_runtime.jsxs)("p",{className:"text-sm text-[#859900] text-center",children:["Your task has been broken down into"," ",(0,jsx_runtime.jsxs)("span",{className:"font-bold",children:[captureResponse.breakdown.total_steps," actionable steps"]})," ","in"," ",(0,jsx_runtime.jsxs)("span",{className:"font-bold",children:[Math.round(captureResponse.processing_time_ms),"ms"]})]})}),(0,jsx_runtime.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setShowHierarchyView(!1),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all "+(showHierarchyView?"bg-[#073642] text-[#93a1a1] border border-[#586e75]":"bg-[#268bd2] text-white"),children:"ðŸŽ¯ Chevron View"}),(0,jsx_runtime.jsx)("button",{onClick:()=>setShowHierarchyView(!0),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all "+(showHierarchyView?"bg-[#268bd2] text-white":"bg-[#073642] text-[#93a1a1] border border-[#586e75]"),children:"ðŸ“‹ Card View"})]}),showHierarchyView?(0,jsx_runtime.jsx)(TaskCardBig.A,{task:taskCardProps,onStartTask:handleStartTask,onViewDetails:handleViewAll}):(0,jsx_runtime.jsxs)("div",{className:"bg-[#073642] rounded-lg p-4 border border-[#586e75]",children:[(0,jsx_runtime.jsxs)("h3",{className:"text-sm font-medium text-[#93a1a1] mb-3 flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{children:"ðŸŽ¯"}),(0,jsx_runtime.jsx)("span",{children:"Task Breakdown"})]}),decomposingNodeId&&decompositionSteps.length>0&&(0,jsx_runtime.jsx)("div",{className:"mb-4 p-3 bg-[#002b36] rounded-lg border border-[#268bd2]",children:(0,jsx_runtime.jsx)(AsyncJobTimeline.A,{jobName:"Decomposing task...",steps:decompositionSteps,currentProgress:decompositionProgress,size:"full",showProgressBar:!0})}),hierarchyTree&&hierarchyTree.children&&hierarchyTree.children.length>0?(0,jsx_runtime.jsx)(AsyncJobTimeline.A,{jobName:hierarchyTree.title,steps:hierarchyTree.children.map((child,index)=>({id:child.task_id,description:child.title,shortLabel:child.title.length>20?`${child.title.slice(0,20)}...`:child.title,detail:child.description,estimatedMinutes:child.estimated_minutes||0,leafType:"auto"===child.delegation_mode?"DIGITAL":"HUMAN",icon:child.icon||child.custom_emoji||("auto"===child.delegation_mode?"ðŸ¤–":"ðŸ‘¤"),status:"pending",tags:[],parentStepId:hierarchyTree.task_id,level:child.level,isLeaf:child.is_leaf,decompositionState:child.decomposition_state})),currentProgress:0,size:"full",showProgressBar:!1,onStepClick:stepId=>{console.log("Step clicked:",stepId)}}):(0,jsx_runtime.jsx)("p",{className:"text-sm text-[#586e75] text-center py-4",children:"No breakdown available"})]}),(0,jsx_runtime.jsx)("div",{className:"mt-4 p-3 bg-[#073642] rounded-lg border border-[#586e75]",children:(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Processing Time"}),(0,jsx_runtime.jsxs)("span",{className:"text-[#93a1a1] font-medium",children:[Math.round(captureResponse.processing_time_ms),"ms"]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Breakdown"}),(0,jsx_runtime.jsxs)("span",{className:"text-[#93a1a1] font-medium",children:[captureResponse.breakdown.digital_count," âš¡ /"," ",captureResponse.breakdown.human_count," ðŸŽ¯"]})]}),captureResponse.voice_processed&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Input Method"}),(0,jsx_runtime.jsx)("span",{className:"text-[#93a1a1] font-medium",children:"Voice"})]}),captureResponse.location_captured&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-[#586e75] block",children:"Location"}),(0,jsx_runtime.jsx)("span",{className:"text-[#93a1a1] font-medium",children:"Captured"})]})]})}),captureResponse.needs_clarification&&captureResponse.clarifications.length>0&&(0,jsx_runtime.jsxs)("div",{className:"mt-4 p-3 bg-[#268bd2]/10 border border-[#268bd2] rounded-lg",children:[(0,jsx_runtime.jsx)("h3",{className:"text-sm font-medium text-[#268bd2] mb-2",children:"Additional Information Needed"}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:captureResponse.clarifications.map((clarification,index)=>(0,jsx_runtime.jsxs)("div",{className:"text-sm",children:[(0,jsx_runtime.jsxs)("p",{className:"text-[#93a1a1] mb-1",children:[(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:[clarification.field,":"]})," ",clarification.question]}),clarification.options&&clarification.options.length>0&&(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:clarification.options.map((option,optIndex)=>(0,jsx_runtime.jsx)("button",{className:"px-2 py-1 text-xs bg-[#073642] text-[#93a1a1] rounded border border-[#586e75] hover:border-[#268bd2] transition-colors",children:option},optIndex))})]},index))})]})]}),(0,jsx_runtime.jsx)("div",{className:"p-4 border-t border-[#586e75] bg-[#073642]",children:(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)("button",{onClick:handleStartTask,className:"flex-1 px-4 py-3 bg-[#2aa198] hover:bg-[#2aa198]/90 text-[#002b36] font-bold rounded-lg transition-all active:scale-95 shadow-lg",children:"Start First Step"}),(0,jsx_runtime.jsx)("button",{onClick:handleViewAll,className:"px-4 py-3 bg-[#073642] hover:bg-[#002b36] text-[#93a1a1] border border-[#586e75] rounded-lg transition-all active:scale-95",children:"View All"}),(0,jsx_runtime.jsx)("button",{onClick:onClose,className:"px-4 py-3 bg-[#073642] hover:bg-[#002b36] text-[#586e75] border border-[#586e75] rounded-lg transition-all active:scale-95",children:"Close"})]})})]})}),showCelebration&&(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:(0,jsx_runtime.jsx)("div",{className:"animate-bounce",children:(0,jsx_runtime.jsx)("div",{className:"text-8xl",children:"âœ…"})})})]})}try{TaskBreakdownModal.displayName="TaskBreakdownModal",TaskBreakdownModal.__docgenInfo={description:"TaskBreakdownModal Component\nDisplays successful task capture with breakdown visualization",displayName:"TaskBreakdownModal",props:{captureResponse:{defaultValue:null,description:"",name:"captureResponse",required:!0,type:{name:"CaptureResponse | null"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onStartTask:{defaultValue:null,description:"",name:"onStartTask",required:!1,type:{name:"(() => void) | undefined"}},onViewAllTasks:{defaultValue:null,description:"",name:"onViewAllTasks",required:!1,type:{name:"(() => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mobile/modals/TaskBreakdownModal.tsx#TaskBreakdownModal"]={docgenInfo:TaskBreakdownModal.__docgenInfo,name:"TaskBreakdownModal",path:"src/components/mobile/modals/TaskBreakdownModal.tsx#TaskBreakdownModal"})}catch(__react_docgen_typescript_loader_error){}var TaskBreakdownModal_stories_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const TaskBreakdownModal_stories={title:"Mobile/Modals/TaskBreakdown",component:TaskBreakdownModal,parameters:{layout:"fullscreen",viewport:{defaultViewport:"mobile1"},docs:{description:{component:"**TaskBreakdownModal** - Slide-up modal showing task breakdown after capture\n\n**Key Features**:\n- **ðŸŽ¯ Chevron View (Default)**: Beautiful interlocking chevrons show task steps visually\n- **ðŸ“‹ Card View**: Traditional task card with action buttons\n- **Live Decomposition**: AsyncJobTimeline shows real-time decomposition progress\n- **Interactive Chevrons**: Click steps to expand and see sub-tasks\n- **Celebration Animation**: Success feedback after capture\n\n**Chevron View Benefits**:\n- Visual flow from left to right (past â†’ future)\n- Consistent with AsyncJobTimeline design language\n- Easy to see digital (ðŸ¤–) vs human (ðŸ‘¤) tasks at a glance\n- Interlocking chevrons create satisfying visual rhythm\n- Each step shows emoji + label for quick scanning\n\n**Decomposition Flow**:\n1. User captures task â†’ Modal opens with Chevron View\n2. Chevrons display all micro-steps in a visual timeline\n3. Click any chevron to expand sub-tasks (if available)\n4. AsyncJobTimeline appears during decomposition showing:\n   - ðŸ” Analyze complexity\n   - ðŸ”¨ Break into subtasks\n   - ðŸ·ï¸ Classify steps\n   - ðŸ’¾ Save results\n5. New chevrons appear for sub-tasks\n\n**ADHD Optimizations**:\n- Celebration animation for dopamine reward\n- Clear action buttons (Start / View All)\n- Processing time displayed for transparency\n- Chevron view reduces cognitive load vs tree structure"}}},decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{height:"100vh",width:"100%",backgroundColor:"#002b36"},children:(0,jsx_runtime.jsx)(Story,{})})]},sampleCaptureResponse={task:{task_id:"task-123",title:"Set up smart AC automation",description:"Automatically turn off AC when leaving home using geofence",status:"pending",priority:"medium",tags:["ðŸ  Home","ðŸ¤– Automation"],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),estimated_hours:.25},micro_steps:[{step_id:"step-1",description:"Research smart plug options",short_label:"Research",estimated_minutes:5,total_minutes:5,leaf_type:"HUMAN",icon:"ðŸ”",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["ðŸŽ¯ Focused"]},{step_id:"step-2",description:"Set up IFTTT geofence trigger",short_label:"Setup geofence",estimated_minutes:7,total_minutes:7,leaf_type:"DIGITAL",icon:"ðŸŒ",is_leaf:!1,decomposition_state:"stub",level:5,tags:["ðŸ¤– Auto","ðŸ§© Complex"]},{step_id:"step-3",description:"Test automation when leaving",short_label:"Test",estimated_minutes:3,total_minutes:3,leaf_type:"HUMAN",icon:"ðŸ§ª",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["âš¡ Quick Win"]}],breakdown:{total_steps:3,total_minutes:15,digital_count:1,human_count:2},processing_time_ms:8234,needs_clarification:!1,clarifications:[]},complexCaptureResponse={task:{task_id:"task-456",title:"Write comprehensive project documentation",description:"Create README, API docs, and deployment guide",status:"pending",priority:"high",tags:["ðŸ“ Docs","ðŸŽ¯ Focused"],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),estimated_hours:2},micro_steps:[{step_id:"step-1",description:"Draft README.md overview",short_label:"README",estimated_minutes:20,total_minutes:20,leaf_type:"HUMAN",icon:"ðŸ“„",is_leaf:!1,decomposition_state:"stub",level:5,tags:[]},{step_id:"step-2",description:"Document API endpoints",short_label:"API docs",estimated_minutes:45,total_minutes:45,leaf_type:"HUMAN",icon:"ðŸ”Œ",is_leaf:!1,decomposition_state:"stub",level:5,tags:["ðŸ§© Complex"]},{step_id:"step-3",description:"Write deployment guide",short_label:"Deploy guide",estimated_minutes:30,total_minutes:30,leaf_type:"HUMAN",icon:"ðŸš€",is_leaf:!1,decomposition_state:"stub",level:5,tags:[]},{step_id:"step-4",description:"Generate docs site with Docusaurus",short_label:"Build site",estimated_minutes:15,total_minutes:15,leaf_type:"DIGITAL",icon:"ðŸ—ï¸",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["ðŸ¤– Auto"]}],breakdown:{total_steps:4,total_minutes:110,digital_count:1,human_count:3},processing_time_ms:12456,needs_clarification:!1,clarifications:[]},simpleTaskResponse={task:{task_id:"task-789",title:"Email Sara about meeting",description:"Send quick update email",status:"pending",priority:"low",tags:["ðŸ“§ Email"],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),estimated_hours:.1},micro_steps:[{step_id:"step-1",description:"Draft email message",short_label:"Draft",estimated_minutes:3,total_minutes:3,leaf_type:"HUMAN",icon:"âœï¸",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["âš¡ Quick Win"]},{step_id:"step-2",description:"Send via Gmail",short_label:"Send",estimated_minutes:0,total_minutes:0,leaf_type:"DIGITAL",icon:"ðŸ“§",is_leaf:!0,decomposition_state:"atomic",level:6,tags:["ðŸ¤– Auto"]}],breakdown:{total_steps:2,total_minutes:3,digital_count:1,human_count:1},processing_time_ms:3421,needs_clarification:!1,clarifications:[]},Default={args:{captureResponse:sampleCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Default modal state after successful task capture. Shows **Chevron View** by default with beautiful interlocking chevrons."}}}},ChevronView__Basic={args:{captureResponse:sampleCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Basic **Chevron View** with 3 micro-steps. Default visualization using beautiful interlocking chevrons."}}}},ChevronView__Interactive={args:{captureResponse:sampleCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},render:args=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"fixed",top:20,left:20,right:20,zIndex:100,background:"#268bd2",padding:"12px",borderRadius:"8px",textAlign:"center"},children:(0,jsx_runtime.jsx)("p",{style:{color:"#fff",fontSize:"12px",margin:0,fontWeight:"bold"},children:"ðŸŽ¯ Click any chevron to expand and see sub-tasks!"})}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{...args})]}),parameters:{docs:{description:{story:"**Interactive Chevron Demo** - Click any chevron step to expand and explore sub-tasks. Chevrons provide visual continuity and clear progression."}}}},ChevronView__Complex={args:{captureResponse:complexCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Complex task with **4 decomposable steps** shown in Chevron View. Beautiful chevron timeline with emoji icons and labels."}}}},ChevronView__ManySteps={args:{captureResponse:{...complexCaptureResponse,micro_steps:Array.from({length:12},(_,i)=>({step_id:`step-${i+1}`,description:`Task step number ${i+1}`,short_label:`Step ${i+1}`,estimated_minutes:Math.floor(15*Math.random())+1,total_minutes:Math.floor(15*Math.random())+1,leaf_type:i%2==0?"HUMAN":"DIGITAL",icon:["ðŸ“","ðŸ”§","ðŸŽ¨","ðŸ’¡","ðŸš€","âš™ï¸","ðŸ”","ðŸŽ¯"][i%8],is_leaf:i%3==0,decomposition_state:i%3==0?"atomic":"stub",level:5,tags:[]})),breakdown:{total_steps:12,total_minutes:120,digital_count:6,human_count:6}},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"Stress test with **12 steps** - tests scrolling, layout, and chevron rendering with many tasks."}}}},CardView__Basic={args:{captureResponse:sampleCaptureResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},render:args=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"fixed",top:20,right:20,zIndex:100,background:"#073642",padding:"12px",borderRadius:"8px"},children:(0,jsx_runtime.jsx)("p",{style:{color:"#93a1a1",fontSize:"11px",margin:0},children:'ðŸ’¡ Click "ðŸ“‹ Card View" button to see traditional card layout'})}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{...args})]}),parameters:{docs:{description:{story:'Modal with **Card View** showing traditional task card layout. Click "ðŸ“‹ Card View" tab to switch from Chevron View.'}}}},CardView__Simple={args:{captureResponse:simpleTaskResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed"),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task clicked"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all tasks clicked")},parameters:{docs:{description:{story:"Simple 2-step task - all atomic, nothing to decompose further."}}}},Features__LiveDecomposition={render:()=>{const[isOpen,setIsOpen]=react.useState(!0),[showDecomposition,setShowDecomposition]=react.useState(!1);return react.useEffect(()=>{const timer=setTimeout(()=>{setShowDecomposition(!0)},2e3);return()=>clearTimeout(timer)},[]),(0,jsx_runtime.jsxs)("div",{children:[showDecomposition&&(0,jsx_runtime.jsx)("div",{style:{position:"fixed",top:20,left:20,right:20,zIndex:100,background:"#268bd2",padding:"16px",borderRadius:"8px",color:"#fff",textAlign:"center",fontWeight:"bold"},children:"âš¡ Decomposition Demo: Watch the AsyncJobTimeline appear!"}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:sampleCaptureResponse,isOpen,onClose:()=>setIsOpen(!1),onStartTask:()=>TaskBreakdownModal_stories_console.log("Start task"),onViewAllTasks:()=>TaskBreakdownModal_stories_console.log("View all")})]})},parameters:{docs:{description:{story:'Shows the decomposition process with AsyncJobTimeline. Click "ðŸ”¨ Decompose" button on stub nodes.'}}}},Features__Clarifications={args:{captureResponse:{...sampleCaptureResponse,needs_clarification:!0,clarifications:[{field:"smart_plug_brand",question:"Which smart plug brand do you prefer?",options:["TP-Link","Wemo","Amazon Smart Plug"]},{field:"geofence_radius",question:"What distance should trigger the automation?",options:["100m","500m","1km"]}]},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"Task requires clarification - shows questions with option chips."}}}},Features__ProcessingSpeed={render:()=>{const[selectedSpeed,setSelectedSpeed]=react.useState("fast"),fastResponse={...sampleCaptureResponse,processing_time_ms:234},slowResponse={...complexCaptureResponse,processing_time_ms:45678};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{style:{position:"fixed",top:20,left:20,right:20,zIndex:100,background:"#073642",padding:"12px",borderRadius:"8px",display:"flex",gap:"8px",justifyContent:"center"},children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setSelectedSpeed("fast"),style:{padding:"8px 16px",borderRadius:"6px",border:"none",background:"fast"===selectedSpeed?"#859900":"#586e75",color:"#fff",cursor:"pointer",fontWeight:"bold",fontSize:"11px"},children:"âš¡ Fast (234ms)"}),(0,jsx_runtime.jsx)("button",{onClick:()=>setSelectedSpeed("slow"),style:{padding:"8px 16px",borderRadius:"6px",border:"none",background:"slow"===selectedSpeed?"#cb4b16":"#586e75",color:"#fff",cursor:"pointer",fontWeight:"bold",fontSize:"11px"},children:"ðŸŒ Slow (45s)"})]}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:"fast"===selectedSpeed?fastResponse:slowResponse,isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")})]})},parameters:{docs:{description:{story:"Toggle between **fast (234ms)** and **slow (45s)** processing times to see how the UI displays different performance metrics."}}}},EdgeCases__AllAtomic={args:{captureResponse:{...simpleTaskResponse,micro_steps:simpleTaskResponse.micro_steps.map(step=>({...step,is_leaf:!0,decomposition_state:"atomic"}))},isOpen:!0,onClose:()=>TaskBreakdownModal_stories_console.log("Modal closed")},parameters:{docs:{description:{story:"All steps are atomic - no decompose buttons should appear."}}}},States__Opening={render:()=>{const[isOpen,setIsOpen]=react.useState(!1);return react.useEffect(()=>{const timer=setTimeout(()=>setIsOpen(!0),500);return()=>clearTimeout(timer)},[]),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:sampleCaptureResponse,isOpen,onClose:()=>setIsOpen(!1)})},parameters:{docs:{description:{story:"Shows the slide-up opening animation."}}}},States__Closing={render:()=>{const[isOpen,setIsOpen]=react.useState(!0);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setIsOpen(!1),style:{position:"fixed",top:20,right:20,zIndex:100,background:"#dc322f",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"Close Modal"}),(0,jsx_runtime.jsx)(TaskBreakdownModal,{captureResponse:sampleCaptureResponse,isOpen,onClose:()=>setIsOpen(!1)})]})},parameters:{docs:{description:{story:"Click the close button to see the slide-down animation."}}}},__namedExportsOrder=["Default","ChevronView__Basic","ChevronView__Interactive","ChevronView__Complex","ChevronView__ManySteps","CardView__Basic","CardView__Simple","Features__LiveDecomposition","Features__Clarifications","Features__ProcessingSpeed","EdgeCases__AllAtomic","States__Opening","States__Closing"]},"./src/services/taskApi.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TaskApiError:()=>TaskApiError,taskApi:()=>taskApi});class TaskApiError extends Error{constructor(message,status){super(message),this.status=status,this.name="TaskApiError"}}async function apiRequest(endpoint,options={}){const url=`http://localhost:8000${endpoint}`,response=await fetch(url,{headers:{"Content-Type":"application/json",...options.headers},...options});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new TaskApiError(errorData.detail||`HTTP ${response.status}: ${response.statusText}`,response.status)}return response.json()}const taskApi={createTask:async taskData=>apiRequest("/api/v1/tasks",{method:"POST",body:JSON.stringify(taskData)}),getTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}`),updateTask:async(taskId,updates)=>apiRequest(`/api/v1/tasks/${taskId}`,{method:"PUT",body:JSON.stringify(updates)}),async deleteTask(taskId){await apiRequest(`/api/v1/tasks/${taskId}`,{method:"DELETE"})},async listTasks(params={}){const searchParams=new URLSearchParams;return Object.entries(params).forEach(([key,value])=>{void 0!==value&&(Array.isArray(value)?value.forEach(item=>searchParams.append(key,item)):searchParams.append(key,String(value)))}),apiRequest(`/api/v1/tasks?${searchParams.toString()}`)},createProject:async projectData=>apiRequest("/api/v1/projects",{method:"POST",body:JSON.stringify(projectData)}),getProject:async projectId=>apiRequest(`/api/v1/projects/${projectId}`),listProjects:async()=>apiRequest("/api/v1/projects"),getTaskHierarchy:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/hierarchy`),bulkUpdateTasks:async(taskIds,updates)=>apiRequest("/api/v1/tasks/bulk",{method:"PATCH",body:JSON.stringify({task_ids:taskIds,updates})}),estimateTaskDuration:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/estimate`,{method:"POST"}),breakDownTask:async taskId=>apiRequest(`/api/v1/tasks/${taskId}/breakdown`,{method:"POST"}),createTaskFromTemplate:async(templateName,projectId,variables)=>apiRequest("/api/v1/tasks/from-template",{method:"POST",body:JSON.stringify({template_name:templateName,project_id:projectId,variables})}),quickCapture:async request=>apiRequest("/api/v1/mobile/quick-capture",{method:"POST",body:JSON.stringify(request)}),getMobileDashboard:async userId=>apiRequest(`/api/v1/mobile/dashboard/${userId}`),getMobileOptimizedTasks:async(userId,limit=20)=>apiRequest(`/api/v1/mobile/tasks/${userId}?limit=${limit}`),processVoiceInput:async(audioText,userId)=>apiRequest("/api/v1/mobile/voice-process",{method:"POST",body:JSON.stringify({audio_text:audioText,user_id:userId})}),getProjectAnalytics:async projectId=>apiRequest(`/api/v1/projects/${projectId}/analytics`),smartPrioritizeTasks:async projectId=>apiRequest(`/api/v1/projects/${projectId}/prioritize`,{method:"POST"})}}}]);