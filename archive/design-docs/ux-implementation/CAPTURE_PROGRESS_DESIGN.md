# ğŸ¯ Capture Progress Bar - Above Textarea Design

## ğŸ¨ Design Goal

Show the capture progress **ABOVE the textarea** with discrete, clear action steps so users can see exactly what's happening during task processing.

---

## ğŸ“ Visual Layout

### State 1: Ready to Capture (Default - No Progress Bar)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ… Morning â€¢ 72% Energy                          [Profile]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                         ğŸ¯ Capture                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ What needs to get done?                                â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚
â”‚  â”‚ Send email to Sara about project deadline...           â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  [âœ“ Auto Mode]  [ Ask Clarity]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 2: Processing - Stage 1 (Analyzing)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ… Morning â€¢ 72% Energy                          [Profile]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                         ğŸ¯ Capture                          â”‚
â”‚                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Processing your task...                              â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  â—â”â”â”â—‹â”â”â”â—‹  Step 1 of 3                               â•‘ â”‚
â”‚  â•‘  ğŸ§  Analyzing task with AI...                         â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  Actions:                                             â•‘ â”‚
â”‚  â•‘  âœ“ Parsing natural language                           â•‘ â”‚
â”‚  â•‘  â‹¯ Extracting entities (action, object, target)       â•‘ â”‚ â† Current
â”‚  â•‘  â‹¯ Detecting priority and urgency                     â•‘ â”‚
â”‚  â•‘  â‹¯ Identifying tags and categories                    â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ What needs to get done?                                â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚ â† Cleared
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  [âœ“ Auto Mode]  [ Ask Clarity]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 3: Processing - Stage 2 (Breaking Down)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ… Morning â€¢ 72% Energy                          [Profile]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                         ğŸ¯ Capture                          â”‚
â”‚                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Processing your task...                              â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  â—â”â”â”â—â”â”â”â—‹  Step 2 of 3                               â•‘ â”‚
â”‚  â•‘  ğŸ”¨ Breaking down into micro-steps...                 â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  Actions:                                             â•‘ â”‚
â”‚  â•‘  âœ“ Task parsed successfully                           â•‘ â”‚
â”‚  â•‘  âœ“ Decomposing into 2-5 minute chunks                 â•‘ â”‚
â”‚  â•‘  â‹¯ Classifying steps (DIGITAL vs HUMAN)               â•‘ â”‚ â† Current
â”‚  â•‘  â‹¯ Estimating duration for each step                  â•‘ â”‚
â”‚  â•‘  â‹¯ Detecting automation opportunities                 â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ What needs to get done?                                â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  [âœ“ Auto Mode]  [ Ask Clarity]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 4: Processing - Stage 3 (Finalizing)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ… Morning â€¢ 72% Energy                          [Profile]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                         ğŸ¯ Capture                          â”‚
â”‚                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Processing your task...                              â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  â—â”â”â”â—â”â”â”â—  Step 3 of 3                               â•‘ â”‚
â”‚  â•‘  âœ¨ Almost done...                                     â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  Actions:                                             â•‘ â”‚
â”‚  â•‘  âœ“ Task decomposed into 5 micro-steps                 â•‘ â”‚
â”‚  â•‘  âœ“ Steps classified (3 human, 1 digital, 1 unknown)   â•‘ â”‚
â”‚  â•‘  âœ“ Creating task in database                          â•‘ â”‚
â”‚  â•‘  â‹¯ Generating automation plan                          â•‘ â”‚ â† Current
â”‚  â•‘  â‹¯ Checking for clarification needs                   â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ What needs to get done?                                â”‚â”‚
â”‚  â”‚                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  [âœ“ Auto Mode]  [ Ask Clarity]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### State 5: Complete! (Success)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ… Morning â€¢ 72% Energy                          [Profile]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                         ğŸ¯ Capture                          â”‚
â”‚                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  âœ… Task captured successfully!                       â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  â—â”â”â”â—â”â”â”â—  Complete in 847ms                         â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  Results:                                             â•‘ â”‚
â”‚  â•‘  âœ“ 5 micro-steps created                              â•‘ â”‚
â”‚  â•‘  âœ“ 3 human tasks â€¢ 1 digital task â€¢ 1 needs info      â•‘ â”‚
â”‚  â•‘  âœ“ Estimated time: 15 minutes                         â•‘ â”‚
â”‚  â•‘  âš ï¸ 1 clarification question                          â•‘ â”‚
â”‚  â•‘                                                        â•‘ â”‚
â”‚  â•‘  [View Task Details]  [Start First Step]              â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ What needs to get done?                                â”‚â”‚ â† Ready
â”‚  â”‚                                                         â”‚â”‚   again
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  [âœ“ Auto Mode]  [ Ask Clarity]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¬ Detailed Action Sequences

### Stage 1: Analyzing (600-800ms)
```
Time    Action Label                              Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0ms     Parsing natural language                  â‹¯ (pending)
100ms   Parsing natural language                  â³ (active)
300ms   Parsing natural language                  âœ“ (done)
        Extracting entities                       â³ (active)
500ms   Extracting entities                       âœ“ (done)
        Detecting priority and urgency            â³ (active)
700ms   Detecting priority and urgency            âœ“ (done)
        Identifying tags and categories           â³ (active)
800ms   Identifying tags and categories           âœ“ (done)
```

### Stage 2: Breaking Down (400-600ms)
```
Time    Action Label                              Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
800ms   Decomposing into 2-5 minute chunks        â³ (active)
1000ms  Decomposing into 2-5 minute chunks        âœ“ (done)
        Classifying steps (DIGITAL vs HUMAN)      â³ (active)
1200ms  Classifying steps (DIGITAL vs HUMAN)      âœ“ (done)
        Estimating duration for each step         â³ (active)
1300ms  Estimating duration for each step         âœ“ (done)
        Detecting automation opportunities        â³ (active)
1400ms  Detecting automation opportunities        âœ“ (done)
```

### Stage 3: Finalizing (200-400ms)
```
Time    Action Label                              Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1400ms  Creating task in database                 â³ (active)
1600ms  Creating task in database                 âœ“ (done)
        Generating automation plan                â³ (active)
1750ms  Generating automation plan                âœ“ (done)
        Checking for clarification needs          â³ (active)
1850ms  Checking for clarification needs          âœ“ (done)
        Finalizing...                             â³ (active)
2000ms  Complete!                                 âœ“ (done)
```

---

## ğŸ¨ Visual States for Actions

### Action Status Icons
```
â‹¯  = Pending (not started yet)      - Gray color
â³ = In Progress (currently running) - Blue color with pulse animation
âœ“  = Complete (done)                 - Green color
âŒ = Failed (error)                  - Red color
```

### Progress Dots
```
â—â”â”â”â—‹â”â”â”â—‹  = Step 1 of 3 (Stage 1 active)
â—â”â”â”â—â”â”â”â—‹  = Step 2 of 3 (Stage 2 active)
â—â”â”â”â—â”â”â”â—  = Step 3 of 3 (Stage 3 active)
```

---

## ğŸ§© Component Design

### Component: `CaptureProgressBar`

```typescript
// frontend/src/components/mobile/CaptureProgressBar.tsx

interface CaptureProgressBarProps {
  stage: 'analyzing' | 'breaking_down' | 'almost_done' | 'complete' | null;
  actions: ActionStep[];
  processingTimeMs?: number;
  onViewDetails?: () => void;
  onStartTask?: () => void;
}

interface ActionStep {
  id: string;
  label: string;
  status: 'pending' | 'active' | 'done' | 'error';
  timestamp?: number;
}

// Example usage:
<CaptureProgressBar
  stage="breaking_down"
  actions={[
    { id: '1', label: 'Parsing natural language', status: 'done' },
    { id: '2', label: 'Extracting entities', status: 'done' },
    { id: '3', label: 'Detecting priority', status: 'done' },
    { id: '4', label: 'Decomposing into chunks', status: 'done' },
    { id: '5', label: 'Classifying steps', status: 'active' },
    { id: '6', label: 'Estimating duration', status: 'pending' },
  ]}
/>
```

### State Management

```typescript
// frontend/src/app/mobile/page.tsx

interface ProcessingState {
  stage: 'analyzing' | 'breaking_down' | 'almost_done' | 'complete' | null;
  actions: ActionStep[];
  startTime: number;
}

const [processingState, setProcessingState] = useState<ProcessingState>({
  stage: null,
  actions: [],
  startTime: 0,
});

// When capture starts
const handleCapture = async (text: string) => {
  setProcessingState({
    stage: 'analyzing',
    actions: [
      { id: '1', label: 'Parsing natural language', status: 'active' },
      { id: '2', label: 'Extracting entities', status: 'pending' },
      { id: '3', label: 'Detecting priority and urgency', status: 'pending' },
      { id: '4', label: 'Identifying tags and categories', status: 'pending' },
    ],
    startTime: Date.now(),
  });

  // Simulate progress updates (in real app, these come from backend or client-side events)
  setTimeout(() => {
    setProcessingState(prev => ({
      ...prev,
      actions: updateActionStatus(prev.actions, '1', 'done', '2', 'active'),
    }));
  }, 200);

  // ... continue with API call
};
```

---

## ğŸ¨ Color Scheme (Solarized Dark)

```typescript
const statusColors = {
  pending: '#586e75',    // Base01 - gray, subdued
  active: '#268bd2',     // Blue - attention-grabbing with pulse
  done: '#859900',       // Green - success
  error: '#dc322f',      // Red - alert
};

const boxColors = {
  background: '#073642', // Base02 - slightly elevated
  border: '#586e75',     // Base01 - subtle border
  borderActive: '#268bd2', // Blue - active state
  borderSuccess: '#859900', // Green - success state
};
```

---

## ğŸ“± Responsive Behavior

### Mobile (Default)
```
- Box takes full width minus 16px padding
- Actions list shows max 4 items (scroll if more)
- Font size: 13px for action labels
- Icons: 16px
```

### Tablet/Desktop
```
- Box max-width: 600px, centered
- Actions list shows max 6 items
- Font size: 14px for action labels
- Icons: 18px
```

---

## ğŸ­ Animation Details

### Progress Dots Animation
```css
/* Dot fills in from left to right */
.progress-dot {
  transition: all 300ms ease-out;
}

.progress-dot.active {
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
}
```

### Action Status Transition
```css
/* Status icon fades and scales */
.action-status {
  transition: all 200ms ease-out;
}

.action-status.pending {
  opacity: 0.4;
}

.action-status.active {
  animation: spin 2s linear infinite; /* For â³ */
}

.action-status.done {
  animation: checkmark-pop 300ms ease-out;
}

@keyframes checkmark-pop {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}
```

### Box Entrance
```css
/* Box slides down from top */
.progress-box {
  animation: slide-down 300ms ease-out;
}

@keyframes slide-down {
  0% { transform: translateY(-100%); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}
```

### Box Exit (Success)
```css
/* Box stays for 3 seconds, then fades out */
.progress-box.complete {
  animation: fade-out 500ms ease-out 3s forwards;
}

@keyframes fade-out {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(0.95); }
}
```

---

## ğŸ”„ Action List by Stage

### Stage 1: "Analyzing" (ğŸ§ )
```
1. â³ Parsing natural language
2. â‹¯ Extracting entities (action, object, target)
3. â‹¯ Detecting priority and urgency
4. â‹¯ Identifying tags and categories
```

### Stage 2: "Breaking Down" (ğŸ”¨)
```
1. âœ“ Task parsed successfully
2. â³ Decomposing into 2-5 minute chunks
3. â‹¯ Classifying steps (DIGITAL vs HUMAN)
4. â‹¯ Estimating duration for each step
5. â‹¯ Detecting automation opportunities
```

### Stage 3: "Almost Done" (âœ¨)
```
1. âœ“ Task decomposed into 5 micro-steps
2. âœ“ Steps classified (3 human, 1 digital, 1 unknown)
3. â³ Creating task in database
4. â‹¯ Generating automation plan
5. â‹¯ Checking for clarification needs
```

### Stage 4: "Complete" (âœ…)
```
Results Summary:
âœ“ 5 micro-steps created
âœ“ 3 human tasks â€¢ 1 digital task â€¢ 1 needs info
âœ“ Estimated time: 15 minutes
âš ï¸ 1 clarification question

[Action Buttons]
```

---

## ğŸ§ª Testing Scenarios

### Test 1: Fast Completion (< 1s)
```
Expected: Actions progress quickly, may skip showing some intermediate states
Behavior: Show final "Complete" state for 3 seconds minimum
```

### Test 2: Slow API (> 3s)
```
Expected: Actions stay on "active" state longer
Behavior: Show realistic progress, don't fake it
```

### Test 3: Error During Processing
```
Expected: Action shows âŒ icon with red color
Behavior: Show error message, allow retry
```

### Test 4: Multiple Rapid Captures
```
Expected: New capture cancels previous progress bar
Behavior: Smooth transition, no flickering
```

---

## ğŸ“Š Comparison: Before vs After

### Before (Current)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  What needs doing?     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ [Enter]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  Analyzing...       â”‚  â† Generic, no detail
â”‚  â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    [Modal pops up]
```

### After (New Design)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â—â”â”â”â—â”â”â”â—‹  Step 2 of 3           â”‚
â”‚  ğŸ”¨ Breaking down...               â”‚
â”‚                                    â”‚
â”‚  Actions:                          â”‚
â”‚  âœ“ Task parsed successfully        â”‚ â† Specific actions
â”‚  â³ Decomposing into chunks         â”‚ â† Current step
â”‚  â‹¯ Classifying steps                â”‚ â† Next steps
â”‚  â‹¯ Estimating duration              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  What needs doing?     â”‚  â† Ready for next task
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Implementation Steps

### Step 1: Create Component
- [ ] Create `CaptureProgressBar.tsx`
- [ ] Add TypeScript interfaces
- [ ] Style with Solarized Dark colors
- [ ] Add animations (slide-down, pulse, checkmark-pop)

### Step 2: Add to Capture Tab
- [ ] Import into `page.tsx`
- [ ] Position above textarea
- [ ] Connect to capture flow state
- [ ] Test with mock data

### Step 3: Wire Up Real Data
- [ ] Map backend stages to action lists
- [ ] Update actions in real-time (or simulate)
- [ ] Show actual processing time
- [ ] Handle errors gracefully

### Step 4: Polish
- [ ] Add haptic feedback on stage transitions (mobile)
- [ ] Add sound effects (optional, subtle)
- [ ] Optimize animations for 60fps
- [ ] Test on various devices

---

## ğŸ’¡ Future Enhancements

### Phase 2 Features
1. **Expand/Collapse** - Allow users to minimize progress bar if they want
2. **History** - Show last 3 captured tasks in a mini-list below progress bar
3. **Estimated Time Remaining** - Show countdown timer based on average completion time
4. **Confidence Score** - Show AI confidence for each step (e.g., "95% confident")
5. **Debug Mode** - Toggle to show raw API responses and timing data

---

**Last Updated**: 2025-10-23
**Version**: 1.0
**Status**: Ready to Implement ğŸš€
